(function(){const V=document.createElement("link").relList;if(V&&V.supports&&V.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))R(g);new MutationObserver(g=>{for(const o of g)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&R(s)}).observe(document,{childList:!0,subtree:!0});function v(g){const o={};return g.integrity&&(o.integrity=g.integrity),g.referrerPolicy&&(o.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?o.credentials="include":g.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function R(g){if(g.ep)return;g.ep=!0;const o=v(g);fetch(g.href,o)}})();var Ot=`varying highp vec2 vTextureCoord;\r
precision highp int;\r
uniform sampler2D uSampler;\r
uniform highp ivec2 uSize;\r
uniform bool uYFlipped;\r
uniform int uOffset;

int f(int i, int u) {\r
    int y = i / u;\r
    return i - y * u;\r
}

int i(int i, int t) {\r
    if(i < t)\r
        return i;\r
    return t;\r
}

int u(int i, int u) {\r
    if(i < u)\r
        return u;\r
    return i;\r
}

int f(int y, int t, int f) {\r
    int x = (y, t), n = u(y, t);\r
    if(f < x)\r
        return f * (f + 1) / 2;\r
    if(f < n)\r
        return x * (x + 1) / 2 + x * (f - x);\r
    int r = f - n;\r
    return x * (x + 1) / 2 + x * (n - x) + (x - 1) * r - (r - 1) * r / 2;\r
}

int i(int y, int t, ivec2 x) {\r
    int r = i(y, t), n = u(y, t), v = x.x + x.y;\r
    bool h = f(v, 2) == 0;\r
    if(v < r) {\r
        if(h)\r
            return f(y, t, v) + v - x.y;\r
        return f(y, t, v) + x.y;\r
    }\r
    if(v < n) {\r
        int s = t - x.y - 1;\r
        if(y < t)\r
            s = r - (y - x.x);\r
        if(h)\r
            return f(y, t, v) + s;\r
        return f(y, t, v) + r - s - 1;\r
    }\r
    int s = t - x.y - 1, e = r + n - v - 1;\r
    if(h)\r
        return f(y, t, v) + s;\r
    return f(y, t, v) + e - s - 1;\r
}

ivec2 u(int y, int t, int x) {\r
    int v = i(y, t), r = u(y, t);\r
    if(x < v * (v + 1) / 2) {\r
        int n = (-1 + int(1e-6 + sqrt(float(8 * x + 1)))) / 2, h = x - f(y, t, n);\r
        bool s = f(n, 2) == 0;\r
        if(s)\r
            return ivec2(h, n - h);\r
        return ivec2(n - h, h);\r
    }\r
    if(x < v * (v + 1) / 2 + v * (r - v)) {\r
        x = x - v * (v + 1) / 2;\r
        int n = v + x / v, s = f(x, v);\r
        bool h = f(n, 2) == 0;\r
        int g = n - v + s + 1, e = v - s - 1, S = n - s, T = s;\r
        if(y > t) {\r
            if(h)\r
                return ivec2(g, e);\r
            return ivec2(S, T);\r
        }\r
        if(h)\r
            return ivec2(T, S);\r
        return ivec2(e, g);\r
    }\r
    int n = v * (v - 1) / 2 - (x - (v * (v + 1) / 2 + v * (r - v))) - 1, s = (-1 + int(sqrt(float(8 * n + 1)))) / 2;\r
    n = r + v - s - 2;\r
    int h = x - f(y, t, n);\r
    bool g = f(n, 2) == 0;\r
    int e = v + r - n - 1;\r
    if(g)\r
        h = e - h - 1;\r
    int S = n + h - y + 1;\r
    return ivec2(n - S, S);\r
}

int f(ivec2 v) {\r
    int y = uSize.x / 8, t = uSize.y / 8, x = i(y, t, ivec2(v.x / 8, v.y / 8)), n = f(x, 4);\r
    v.x = f(v.x, 8);\r
    v.y = f(v.y, 8);\r
    ivec2 r = v;\r
    if(n == 1)\r
        r.x = 7 - v.x;\r
    if(n == 2)\r
        r.x = v.y, r.y = v.x;\r
    if(n == 3)\r
        r.x = 7 - v.y, r.y = v.x;\r
    return x * 64 + r.x + r.y * 8;\r
}

ivec2 i(int i) {\r
    int x = uSize.x, t = uSize.y, v = x * t;\r
    if(i < 0)\r
        i += v;\r
    i = f(i, v);\r
    int y = x / 8, n = t / 8, h = i / 64, r = i - h * 64, s = r / 8, S = r - s * 8, e = f(h, 4);\r
    ivec2 g = u(y, n, h), T = g * 8;\r
    if(e == 0)\r
        T.x += S, T.y += s;\r
    if(e == 1)\r
        T.x += 7 - S, T.y += s;\r
    if(e == 2)\r
        T.x += s, T.y += S;\r
    if(e == 3)\r
        T.x += s, T.y += 7 - S;\r
    return T;\r
}

int t(ivec2 y, int i) {\r
    int v = uSize.x * uSize.y, n = f(y) + i;\r
    if(n > v)\r
        n -= v;\r
    if(n < 0)\r
        n += v;\r
    if(n > v)\r
        return -1;\r
    if(n < 0)\r
        return -2;\r
    return n;\r
}\r
void main() {\r
    ivec2 y = ivec2(gl_FragCoord);\r
    if(uYFlipped)\r
        y.y = uSize.y - y.y - 1;\r
    if(uOffset == -1) {\r
        gl_FragColor = texture2D(uSampler, vec2(y) / vec2(uSize));\r
        return;\r
    }\r
    int n = t(y, uOffset);\r
    if(n >= 0)\r
        y = i(n), gl_FragColor = texture2D(uSampler, (vec2(y) + .5) / vec2(uSize));\r
    else\r
        gl_FragColor = vec4(1., 0., 0., 1.);\r
}`,Bt=`attribute vec2 aVertex;\r
varying highp vec2 vTextureCoord;

void main(void) {\r
    gl_Position = vec4(aVertex, 0.0, 1.0);\r
    vTextureCoord = aVertex * 0.5 + 0.5;\r
}`;var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ft(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}function wt(w){throw new Error('Could not dynamically require "'+w+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tt={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(w,V){(function(v){w.exports=v()})(function(){return function v(R,g,o){function s(c,y){if(!g[c]){if(!R[c]){var m=typeof wt=="function"&&wt;if(!y&&m)return m(c,!0);if(i)return i(c,!0);var _=new Error("Cannot find module '"+c+"'");throw _.code="MODULE_NOT_FOUND",_}var n=g[c]={exports:{}};R[c][0].call(n.exports,function(l){var r=R[c][1][l];return s(r||l)},n,n.exports,v,R,g,o)}return g[c].exports}for(var i=typeof wt=="function"&&wt,h=0;h<o.length;h++)s(o[h]);return s}({1:[function(v,R,g){var o=v("./utils"),s=v("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";g.encode=function(h){for(var c,y,m,_,n,l,r,f=[],a=0,p=h.length,k=p,S=o.getTypeOf(h)!=="string";a<h.length;)k=p-a,m=S?(c=h[a++],y=a<p?h[a++]:0,a<p?h[a++]:0):(c=h.charCodeAt(a++),y=a<p?h.charCodeAt(a++):0,a<p?h.charCodeAt(a++):0),_=c>>2,n=(3&c)<<4|y>>4,l=1<k?(15&y)<<2|m>>6:64,r=2<k?63&m:64,f.push(i.charAt(_)+i.charAt(n)+i.charAt(l)+i.charAt(r));return f.join("")},g.decode=function(h){var c,y,m,_,n,l,r=0,f=0,a="data:";if(h.substr(0,a.length)===a)throw new Error("Invalid base64 input, it looks like a data url.");var p,k=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===i.charAt(64)&&k--,h.charAt(h.length-2)===i.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=s.uint8array?new Uint8Array(0|k):new Array(0|k);r<h.length;)c=i.indexOf(h.charAt(r++))<<2|(_=i.indexOf(h.charAt(r++)))>>4,y=(15&_)<<4|(n=i.indexOf(h.charAt(r++)))>>2,m=(3&n)<<6|(l=i.indexOf(h.charAt(r++))),p[f++]=c,n!==64&&(p[f++]=y),l!==64&&(p[f++]=m);return p}},{"./support":30,"./utils":32}],2:[function(v,R,g){var o=v("./external"),s=v("./stream/DataWorker"),i=v("./stream/Crc32Probe"),h=v("./stream/DataLengthProbe");function c(y,m,_,n,l){this.compressedSize=y,this.uncompressedSize=m,this.crc32=_,this.compression=n,this.compressedContent=l}c.prototype={getContentWorker:function(){var y=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),m=this;return y.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(y,m,_){return y.pipe(new i).pipe(new h("uncompressedSize")).pipe(m.compressWorker(_)).pipe(new h("compressedSize")).withStreamInfo("compression",m)},R.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(v,R,g){var o=v("./stream/GenericWorker");g.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},g.DEFLATE=v("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(v,R,g){var o=v("./utils"),s=function(){for(var i,h=[],c=0;c<256;c++){i=c;for(var y=0;y<8;y++)i=1&i?3988292384^i>>>1:i>>>1;h[c]=i}return h}();R.exports=function(i,h){return i!==void 0&&i.length?o.getTypeOf(i)!=="string"?function(c,y,m,_){var n=s,l=_+m;c^=-1;for(var r=_;r<l;r++)c=c>>>8^n[255&(c^y[r])];return-1^c}(0|h,i,i.length,0):function(c,y,m,_){var n=s,l=_+m;c^=-1;for(var r=_;r<l;r++)c=c>>>8^n[255&(c^y.charCodeAt(r))];return-1^c}(0|h,i,i.length,0):0}},{"./utils":32}],5:[function(v,R,g){g.base64=!1,g.binary=!1,g.dir=!1,g.createFolders=!0,g.date=null,g.compression=null,g.compressionOptions=null,g.comment=null,g.unixPermissions=null,g.dosPermissions=null},{}],6:[function(v,R,g){var o=null;o=typeof Promise<"u"?Promise:v("lie"),R.exports={Promise:o}},{lie:37}],7:[function(v,R,g){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=v("pako"),i=v("./utils"),h=v("./stream/GenericWorker"),c=o?"uint8array":"array";function y(m,_){h.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=_,this.meta={}}g.magic="\b\0",i.inherits(y,h),y.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(c,m.data),!1)},y.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(_){m.push({data:_,meta:m.meta})}},g.compressWorker=function(m){return new y("Deflate",m)},g.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(v,R,g){function o(n,l){var r,f="";for(r=0;r<l;r++)f+=String.fromCharCode(255&n),n>>>=8;return f}function s(n,l,r,f,a,p){var k,S,E=n.file,D=n.compression,O=p!==c.utf8encode,j=i.transformTo("string",p(E.name)),I=i.transformTo("string",c.utf8encode(E.name)),G=E.comment,$=i.transformTo("string",p(G)),b=i.transformTo("string",c.utf8encode(G)),B=I.length!==E.name.length,e=b.length!==G.length,U="",Q="",N="",tt=E.dir,M=E.date,J={crc32:0,compressedSize:0,uncompressedSize:0};l&&!r||(J.crc32=n.crc32,J.compressedSize=n.compressedSize,J.uncompressedSize=n.uncompressedSize);var z=0;l&&(z|=8),O||!B&&!e||(z|=2048);var T=0,q=0;tt&&(T|=16),a==="UNIX"?(q=798,T|=function(H,at){var ht=H;return H||(ht=at?16893:33204),(65535&ht)<<16}(E.unixPermissions,tt)):(q=20,T|=function(H){return 63&(H||0)}(E.dosPermissions)),k=M.getUTCHours(),k<<=6,k|=M.getUTCMinutes(),k<<=5,k|=M.getUTCSeconds()/2,S=M.getUTCFullYear()-1980,S<<=4,S|=M.getUTCMonth()+1,S<<=5,S|=M.getUTCDate(),B&&(Q=o(1,1)+o(y(j),4)+I,U+="up"+o(Q.length,2)+Q),e&&(N=o(1,1)+o(y($),4)+b,U+="uc"+o(N.length,2)+N);var X="";return X+=`
\0`,X+=o(z,2),X+=D.magic,X+=o(k,2),X+=o(S,2),X+=o(J.crc32,4),X+=o(J.compressedSize,4),X+=o(J.uncompressedSize,4),X+=o(j.length,2),X+=o(U.length,2),{fileRecord:m.LOCAL_FILE_HEADER+X+j+U,dirRecord:m.CENTRAL_FILE_HEADER+o(q,2)+X+o($.length,2)+"\0\0\0\0"+o(T,4)+o(f,4)+j+U+$}}var i=v("../utils"),h=v("../stream/GenericWorker"),c=v("../utf8"),y=v("../crc32"),m=v("../signature");function _(n,l,r,f){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=l,this.zipPlatform=r,this.encodeFileName=f,this.streamFiles=n,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(_,h),_.prototype.push=function(n){var l=n.meta.percent||0,r=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(n):(this.bytesWritten+=n.data.length,h.prototype.push.call(this,{data:n.data,meta:{currentFile:this.currentFile,percent:r?(l+100*(r-f-1))/r:100}}))},_.prototype.openedSource=function(n){this.currentSourceOffset=this.bytesWritten,this.currentFile=n.file.name;var l=this.streamFiles&&!n.file.dir;if(l){var r=s(n,l,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(n){this.accumulate=!1;var l=this.streamFiles&&!n.file.dir,r=s(n,l,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),l)this.push({data:function(f){return m.DATA_DESCRIPTOR+o(f.crc32,4)+o(f.compressedSize,4)+o(f.uncompressedSize,4)}(n),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var n=this.bytesWritten,l=0;l<this.dirRecords.length;l++)this.push({data:this.dirRecords[l],meta:{percent:100}});var r=this.bytesWritten-n,f=function(a,p,k,S,E){var D=i.transformTo("string",E(S));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(a,2)+o(a,2)+o(p,4)+o(k,4)+o(D.length,2)+D}(this.dirRecords.length,r,n,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(n){this._sources.push(n);var l=this;return n.on("data",function(r){l.processChunk(r)}),n.on("end",function(){l.closedSource(l.previous.streamInfo),l._sources.length?l.prepareNextSource():l.end()}),n.on("error",function(r){l.error(r)}),this},_.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(n){var l=this._sources;if(!h.prototype.error.call(this,n))return!1;for(var r=0;r<l.length;r++)try{l[r].error(n)}catch{}return!0},_.prototype.lock=function(){h.prototype.lock.call(this);for(var n=this._sources,l=0;l<n.length;l++)n[l].lock()},R.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(v,R,g){var o=v("../compressions"),s=v("./ZipFileWorker");g.generateWorker=function(i,h,c){var y=new s(h.streamFiles,c,h.platform,h.encodeFileName),m=0;try{i.forEach(function(_,n){m++;var l=function(p,k){var S=p||k,E=o[S];if(!E)throw new Error(S+" is not a valid compression method !");return E}(n.options.compression,h.compression),r=n.options.compressionOptions||h.compressionOptions||{},f=n.dir,a=n.date;n._compressWorker(l,r).withStreamInfo("file",{name:_,dir:f,date:a,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(y)}),y.entriesCount=m}catch(_){y.error(_)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(v,R,g){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var i in this)typeof this[i]!="function"&&(s[i]=this[i]);return s}}(o.prototype=v("./object")).loadAsync=v("./load"),o.support=v("./support"),o.defaults=v("./defaults"),o.version="3.10.1",o.loadAsync=function(s,i){return new o().loadAsync(s,i)},o.external=v("./external"),R.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(v,R,g){var o=v("./utils"),s=v("./external"),i=v("./utf8"),h=v("./zipEntries"),c=v("./stream/Crc32Probe"),y=v("./nodejsUtils");function m(_){return new s.Promise(function(n,l){var r=_.decompressed.getContentWorker().pipe(new c);r.on("error",function(f){l(f)}).on("end",function(){r.streamInfo.crc32!==_.decompressed.crc32?l(new Error("Corrupted zip : CRC32 mismatch")):n()}).resume()})}R.exports=function(_,n){var l=this;return n=o.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),y.isNode&&y.isStream(_)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",_,!0,n.optimizedBinaryString,n.base64).then(function(r){var f=new h(n);return f.load(r),f}).then(function(r){var f=[s.Promise.resolve(r)],a=r.files;if(n.checkCRC32)for(var p=0;p<a.length;p++)f.push(m(a[p]));return s.Promise.all(f)}).then(function(r){for(var f=r.shift(),a=f.files,p=0;p<a.length;p++){var k=a[p],S=k.fileNameStr,E=o.resolve(k.fileNameStr);l.file(E,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:n.createFolders}),k.dir||(l.file(E).unsafeOriginalName=S)}return f.zipComment.length&&(l.comment=f.zipComment),l})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(v,R,g){var o=v("../utils"),s=v("../stream/GenericWorker");function i(h,c){s.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(c)}o.inherits(i,s),i.prototype._bindStream=function(h){var c=this;(this._stream=h).pause(),h.on("data",function(y){c.push({data:y,meta:{percent:0}})}).on("error",function(y){c.isPaused?this.generatedError=y:c.error(y)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},i.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},R.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(v,R,g){var o=v("readable-stream").Readable;function s(i,h,c){o.call(this,h),this._helper=i;var y=this;i.on("data",function(m,_){y.push(m)||y._helper.pause(),c&&c(_)}).on("error",function(m){y.emit("error",m)}).on("end",function(){y.push(null)})}v("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},R.exports=s},{"../utils":32,"readable-stream":16}],14:[function(v,R,g){R.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(v,R,g){function o(E,D,O){var j,I=i.getTypeOf(D),G=i.extend(O||{},y);G.date=G.date||new Date,G.compression!==null&&(G.compression=G.compression.toUpperCase()),typeof G.unixPermissions=="string"&&(G.unixPermissions=parseInt(G.unixPermissions,8)),G.unixPermissions&&16384&G.unixPermissions&&(G.dir=!0),G.dosPermissions&&16&G.dosPermissions&&(G.dir=!0),G.dir&&(E=a(E)),G.createFolders&&(j=f(E))&&p.call(this,j,!0);var $=I==="string"&&G.binary===!1&&G.base64===!1;O&&O.binary!==void 0||(G.binary=!$),(D instanceof m&&D.uncompressedSize===0||G.dir||!D||D.length===0)&&(G.base64=!1,G.binary=!0,D="",G.compression="STORE",I="string");var b=null;b=D instanceof m||D instanceof h?D:l.isNode&&l.isStream(D)?new r(E,D):i.prepareContent(E,D,G.binary,G.optimizedBinaryString,G.base64);var B=new _(E,b,G);this.files[E]=B}var s=v("./utf8"),i=v("./utils"),h=v("./stream/GenericWorker"),c=v("./stream/StreamHelper"),y=v("./defaults"),m=v("./compressedObject"),_=v("./zipObject"),n=v("./generate"),l=v("./nodejsUtils"),r=v("./nodejs/NodejsStreamInputAdapter"),f=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var D=E.lastIndexOf("/");return 0<D?E.substring(0,D):""},a=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},p=function(E,D){return D=D!==void 0?D:y.createFolders,E=a(E),this.files[E]||o.call(this,E,null,{dir:!0,createFolders:D}),this.files[E]};function k(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var D,O,j;for(D in this.files)j=this.files[D],(O=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&E(O,j)},filter:function(E){var D=[];return this.forEach(function(O,j){E(O,j)&&D.push(j)}),D},file:function(E,D,O){if(arguments.length!==1)return E=this.root+E,o.call(this,E,D,O),this;if(k(E)){var j=E;return this.filter(function(G,$){return!$.dir&&j.test(G)})}var I=this.files[this.root+E];return I&&!I.dir?I:null},folder:function(E){if(!E)return this;if(k(E))return this.filter(function(I,G){return G.dir&&E.test(I)});var D=this.root+E,O=p.call(this,D),j=this.clone();return j.root=O.name,j},remove:function(E){E=this.root+E;var D=this.files[E];if(D||(E.slice(-1)!=="/"&&(E+="/"),D=this.files[E]),D&&!D.dir)delete this.files[E];else for(var O=this.filter(function(I,G){return G.name.slice(0,E.length)===E}),j=0;j<O.length;j++)delete this.files[O[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var D,O={};try{if((O=i.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");i.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var j=O.comment||this.comment||"";D=n.generateWorker(this,O,j)}catch(I){(D=new h("error")).error(I)}return new c(D,O.type||"string",O.mimeType)},generateAsync:function(E,D){return this.generateInternalStream(E).accumulate(D)},generateNodeStream:function(E,D){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(D)}};R.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(v,R,g){R.exports=v("stream")},{stream:void 0}],17:[function(v,R,g){var o=v("./DataReader");function s(i){o.call(this,i);for(var h=0;h<this.data.length;h++)i[h]=255&i[h]}v("../utils").inherits(s,o),s.prototype.byteAt=function(i){return this.data[this.zero+i]},s.prototype.lastIndexOfSignature=function(i){for(var h=i.charCodeAt(0),c=i.charCodeAt(1),y=i.charCodeAt(2),m=i.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===h&&this.data[_+1]===c&&this.data[_+2]===y&&this.data[_+3]===m)return _-this.zero;return-1},s.prototype.readAndCheckSignature=function(i){var h=i.charCodeAt(0),c=i.charCodeAt(1),y=i.charCodeAt(2),m=i.charCodeAt(3),_=this.readData(4);return h===_[0]&&c===_[1]&&y===_[2]&&m===_[3]},s.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,h},R.exports=s},{"../utils":32,"./DataReader":18}],18:[function(v,R,g){var o=v("../utils");function s(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var h,c=0;for(this.checkOffset(i),h=this.index+i-1;h>=this.index;h--)c=(c<<8)+this.byteAt(h);return this.index+=i,c},readString:function(i){return o.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},R.exports=s},{"../utils":32}],19:[function(v,R,g){var o=v("./Uint8ArrayReader");function s(i){o.call(this,i)}v("../utils").inherits(s,o),s.prototype.readData=function(i){this.checkOffset(i);var h=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,h},R.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(v,R,g){var o=v("./DataReader");function s(i){o.call(this,i)}v("../utils").inherits(s,o),s.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},s.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},s.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},s.prototype.readData=function(i){this.checkOffset(i);var h=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,h},R.exports=s},{"../utils":32,"./DataReader":18}],21:[function(v,R,g){var o=v("./ArrayReader");function s(i){o.call(this,i)}v("../utils").inherits(s,o),s.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,h},R.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(v,R,g){var o=v("../utils"),s=v("../support"),i=v("./ArrayReader"),h=v("./StringReader"),c=v("./NodeBufferReader"),y=v("./Uint8ArrayReader");R.exports=function(m){var _=o.getTypeOf(m);return o.checkSupport(_),_!=="string"||s.uint8array?_==="nodebuffer"?new c(m):s.uint8array?new y(o.transformTo("uint8array",m)):new i(o.transformTo("array",m)):new h(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(v,R,g){g.LOCAL_FILE_HEADER="PK",g.CENTRAL_FILE_HEADER="PK",g.CENTRAL_DIRECTORY_END="PK",g.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",g.ZIP64_CENTRAL_DIRECTORY_END="PK",g.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(v,R,g){var o=v("./GenericWorker"),s=v("../utils");function i(h){o.call(this,"ConvertWorker to "+h),this.destType=h}s.inherits(i,o),i.prototype.processChunk=function(h){this.push({data:s.transformTo(this.destType,h.data),meta:h.meta})},R.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(v,R,g){var o=v("./GenericWorker"),s=v("../crc32");function i(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}v("../utils").inherits(i,o),i.prototype.processChunk=function(h){this.streamInfo.crc32=s(h.data,this.streamInfo.crc32||0),this.push(h)},R.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(v,R,g){var o=v("../utils"),s=v("./GenericWorker");function i(h){s.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}o.inherits(i,s),i.prototype.processChunk=function(h){if(h){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+h.data.length}s.prototype.processChunk.call(this,h)},R.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(v,R,g){var o=v("../utils"),s=v("./GenericWorker");function i(h){s.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(y){c.dataIsReady=!0,c.data=y,c.max=y&&y.length||0,c.type=o.getTypeOf(y),c.isPaused||c._tickAndRepeat()},function(y){c.error(y)})}o.inherits(i,s),i.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,c);break;case"uint8array":h=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":h=this.data.slice(this.index,c)}return this.index=c,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},R.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(v,R,g){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,i){return this._listeners[s].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,i){if(this._listeners[s])for(var h=0;h<this._listeners[s].length;h++)this._listeners[s][h].call(this,i)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var i=this;return s.on("data",function(h){i.processChunk(h)}),s.on("end",function(){i.end()}),s.on("error",function(h){i.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,i){return this.extraStreamInfo[s]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},R.exports=o},{}],29:[function(v,R,g){var o=v("../utils"),s=v("./ConvertWorker"),i=v("./GenericWorker"),h=v("../base64"),c=v("../support"),y=v("../external"),m=null;if(c.nodestream)try{m=v("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(l,r){return new y.Promise(function(f,a){var p=[],k=l._internalType,S=l._outputType,E=l._mimeType;l.on("data",function(D,O){p.push(D),r&&r(O)}).on("error",function(D){p=[],a(D)}).on("end",function(){try{var D=function(O,j,I){switch(O){case"blob":return o.newBlob(o.transformTo("arraybuffer",j),I);case"base64":return h.encode(j);default:return o.transformTo(O,j)}}(S,function(O,j){var I,G=0,$=null,b=0;for(I=0;I<j.length;I++)b+=j[I].length;switch(O){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for($=new Uint8Array(b),I=0;I<j.length;I++)$.set(j[I],G),G+=j[I].length;return $;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+O+"'")}}(k,p),E);f(D)}catch(O){a(O)}p=[]}).resume()})}function n(l,r,f){var a=r;switch(r){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=r,this._mimeType=f,o.checkSupport(a),this._worker=l.pipe(new s(a)),l.lock()}catch(p){this._worker=new i("error"),this._worker.error(p)}}n.prototype={accumulate:function(l){return _(this,l)},on:function(l,r){var f=this;return l==="data"?this._worker.on(l,function(a){r.call(f,a.data,a.meta)}):this._worker.on(l,function(){o.delay(r,arguments,f)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(l){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},l)}},R.exports=n},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(v,R,g){if(g.base64=!0,g.array=!0,g.string=!0,g.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",g.nodebuffer=typeof Buffer<"u",g.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")g.blob=!1;else{var o=new ArrayBuffer(0);try{g.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),g.blob=s.getBlob("application/zip").size===0}catch{g.blob=!1}}}try{g.nodestream=!!v("readable-stream").Readable}catch{g.nodestream=!1}},{"readable-stream":16}],31:[function(v,R,g){for(var o=v("./utils"),s=v("./support"),i=v("./nodejsUtils"),h=v("./stream/GenericWorker"),c=new Array(256),y=0;y<256;y++)c[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;c[254]=c[254]=1;function m(){h.call(this,"utf-8 decode"),this.leftOver=null}function _(){h.call(this,"utf-8 encode")}g.utf8encode=function(n){return s.nodebuffer?i.newBufferFrom(n,"utf-8"):function(l){var r,f,a,p,k,S=l.length,E=0;for(p=0;p<S;p++)(64512&(f=l.charCodeAt(p)))==55296&&p+1<S&&(64512&(a=l.charCodeAt(p+1)))==56320&&(f=65536+(f-55296<<10)+(a-56320),p++),E+=f<128?1:f<2048?2:f<65536?3:4;for(r=s.uint8array?new Uint8Array(E):new Array(E),p=k=0;k<E;p++)(64512&(f=l.charCodeAt(p)))==55296&&p+1<S&&(64512&(a=l.charCodeAt(p+1)))==56320&&(f=65536+(f-55296<<10)+(a-56320),p++),f<128?r[k++]=f:(f<2048?r[k++]=192|f>>>6:(f<65536?r[k++]=224|f>>>12:(r[k++]=240|f>>>18,r[k++]=128|f>>>12&63),r[k++]=128|f>>>6&63),r[k++]=128|63&f);return r}(n)},g.utf8decode=function(n){return s.nodebuffer?o.transformTo("nodebuffer",n).toString("utf-8"):function(l){var r,f,a,p,k=l.length,S=new Array(2*k);for(r=f=0;r<k;)if((a=l[r++])<128)S[f++]=a;else if(4<(p=c[a]))S[f++]=65533,r+=p-1;else{for(a&=p===2?31:p===3?15:7;1<p&&r<k;)a=a<<6|63&l[r++],p--;1<p?S[f++]=65533:a<65536?S[f++]=a:(a-=65536,S[f++]=55296|a>>10&1023,S[f++]=56320|1023&a)}return S.length!==f&&(S.subarray?S=S.subarray(0,f):S.length=f),o.applyFromCharCode(S)}(n=o.transformTo(s.uint8array?"uint8array":"array",n))},o.inherits(m,h),m.prototype.processChunk=function(n){var l=o.transformTo(s.uint8array?"uint8array":"array",n.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var r=l;(l=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),l.set(r,this.leftOver.length)}else l=this.leftOver.concat(l);this.leftOver=null}var f=function(p,k){var S;for((k=k||p.length)>p.length&&(k=p.length),S=k-1;0<=S&&(192&p[S])==128;)S--;return S<0||S===0?k:S+c[p[S]]>k?S:k}(l),a=l;f!==l.length&&(s.uint8array?(a=l.subarray(0,f),this.leftOver=l.subarray(f,l.length)):(a=l.slice(0,f),this.leftOver=l.slice(f,l.length))),this.push({data:g.utf8decode(a),meta:n.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:g.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},g.Utf8DecodeWorker=m,o.inherits(_,h),_.prototype.processChunk=function(n){this.push({data:g.utf8encode(n.data),meta:n.meta})},g.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(v,R,g){var o=v("./support"),s=v("./base64"),i=v("./nodejsUtils"),h=v("./external");function c(r){return r}function y(r,f){for(var a=0;a<r.length;++a)f[a]=255&r.charCodeAt(a);return f}v("setimmediate"),g.newBlob=function(r,f){g.checkSupport("blob");try{return new Blob([r],{type:f})}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return a.append(r),a.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(r,f,a){var p=[],k=0,S=r.length;if(S<=a)return String.fromCharCode.apply(null,r);for(;k<S;)f==="array"||f==="nodebuffer"?p.push(String.fromCharCode.apply(null,r.slice(k,Math.min(k+a,S)))):p.push(String.fromCharCode.apply(null,r.subarray(k,Math.min(k+a,S)))),k+=a;return p.join("")},stringifyByChar:function(r){for(var f="",a=0;a<r.length;a++)f+=String.fromCharCode(r[a]);return f},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function _(r){var f=65536,a=g.getTypeOf(r),p=!0;if(a==="uint8array"?p=m.applyCanBeUsed.uint8array:a==="nodebuffer"&&(p=m.applyCanBeUsed.nodebuffer),p)for(;1<f;)try{return m.stringifyByChunk(r,a,f)}catch{f=Math.floor(f/2)}return m.stringifyByChar(r)}function n(r,f){for(var a=0;a<r.length;a++)f[a]=r[a];return f}g.applyFromCharCode=_;var l={};l.string={string:c,array:function(r){return y(r,new Array(r.length))},arraybuffer:function(r){return l.string.uint8array(r).buffer},uint8array:function(r){return y(r,new Uint8Array(r.length))},nodebuffer:function(r){return y(r,i.allocBuffer(r.length))}},l.array={string:_,array:c,arraybuffer:function(r){return new Uint8Array(r).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return i.newBufferFrom(r)}},l.arraybuffer={string:function(r){return _(new Uint8Array(r))},array:function(r){return n(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:c,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return i.newBufferFrom(new Uint8Array(r))}},l.uint8array={string:_,array:function(r){return n(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:c,nodebuffer:function(r){return i.newBufferFrom(r)}},l.nodebuffer={string:_,array:function(r){return n(r,new Array(r.length))},arraybuffer:function(r){return l.nodebuffer.uint8array(r).buffer},uint8array:function(r){return n(r,new Uint8Array(r.length))},nodebuffer:c},g.transformTo=function(r,f){if(f=f||"",!r)return f;g.checkSupport(r);var a=g.getTypeOf(f);return l[a][r](f)},g.resolve=function(r){for(var f=r.split("/"),a=[],p=0;p<f.length;p++){var k=f[p];k==="."||k===""&&p!==0&&p!==f.length-1||(k===".."?a.pop():a.push(k))}return a.join("/")},g.getTypeOf=function(r){return typeof r=="string"?"string":Object.prototype.toString.call(r)==="[object Array]"?"array":o.nodebuffer&&i.isBuffer(r)?"nodebuffer":o.uint8array&&r instanceof Uint8Array?"uint8array":o.arraybuffer&&r instanceof ArrayBuffer?"arraybuffer":void 0},g.checkSupport=function(r){if(!o[r.toLowerCase()])throw new Error(r+" is not supported by this platform")},g.MAX_VALUE_16BITS=65535,g.MAX_VALUE_32BITS=-1,g.pretty=function(r){var f,a,p="";for(a=0;a<(r||"").length;a++)p+="\\x"+((f=r.charCodeAt(a))<16?"0":"")+f.toString(16).toUpperCase();return p},g.delay=function(r,f,a){setImmediate(function(){r.apply(a||null,f||[])})},g.inherits=function(r,f){function a(){}a.prototype=f.prototype,r.prototype=new a},g.extend=function(){var r,f,a={};for(r=0;r<arguments.length;r++)for(f in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],f)&&a[f]===void 0&&(a[f]=arguments[r][f]);return a},g.prepareContent=function(r,f,a,p,k){return h.Promise.resolve(f).then(function(S){return o.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new h.Promise(function(E,D){var O=new FileReader;O.onload=function(j){E(j.target.result)},O.onerror=function(j){D(j.target.error)},O.readAsArrayBuffer(S)}):S}).then(function(S){var E=g.getTypeOf(S);return E?(E==="arraybuffer"?S=g.transformTo("uint8array",S):E==="string"&&(k?S=s.decode(S):a&&p!==!0&&(S=function(D){return y(D,o.uint8array?new Uint8Array(D.length):new Array(D.length))}(S))),S):h.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(v,R,g){var o=v("./reader/readerFor"),s=v("./utils"),i=v("./signature"),h=v("./zipEntry"),c=v("./support");function y(m){this.files=[],this.loadOptions=m}y.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(_)+", expected "+s.pretty(m)+")")}},isSignature:function(m,_){var n=this.reader.index;this.reader.setIndex(m);var l=this.reader.readString(4)===_;return this.reader.setIndex(n),l},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),_=c.uint8array?"uint8array":"array",n=s.transformTo(_,m);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,_,n,l=this.zip64EndOfCentralSize-44;0<l;)m=this.reader.readInt(2),_=this.reader.readInt(4),n=this.reader.readData(_),this.zip64ExtensibleData[m]={id:m,length:_,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,_;for(m=0;m<this.files.length;m++)_=this.files[m],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(m=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var _=m;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var l=_-n;if(0<l)this.isSignature(_,i.CENTRAL_FILE_HEADER)||(this.reader.zero=l);else if(l<0)throw new Error("Corrupted zip: missing "+Math.abs(l)+" bytes.")},prepareReader:function(m){this.reader=o(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},R.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(v,R,g){var o=v("./reader/readerFor"),s=v("./utils"),i=v("./compressedObject"),h=v("./crc32"),c=v("./utf8"),y=v("./compressions"),m=v("./support");function _(n,l){this.options=n,this.loadOptions=l}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(n){var l,r;if(n.skip(22),this.fileNameLength=n.readInt(2),r=n.readInt(2),this.fileName=n.readData(this.fileNameLength),n.skip(r),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((l=function(f){for(var a in y)if(Object.prototype.hasOwnProperty.call(y,a)&&y[a].magic===f)return y[a];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,l,n.readData(this.compressedSize))},readCentralPart:function(n){this.versionMadeBy=n.readInt(2),n.skip(2),this.bitFlag=n.readInt(2),this.compressionMethod=n.readString(2),this.date=n.readDate(),this.crc32=n.readInt(4),this.compressedSize=n.readInt(4),this.uncompressedSize=n.readInt(4);var l=n.readInt(2);if(this.extraFieldsLength=n.readInt(2),this.fileCommentLength=n.readInt(2),this.diskNumberStart=n.readInt(2),this.internalFileAttributes=n.readInt(2),this.externalFileAttributes=n.readInt(4),this.localHeaderOffset=n.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");n.skip(l),this.readExtraFields(n),this.parseZIP64ExtraField(n),this.fileComment=n.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var n=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),n==0&&(this.dosPermissions=63&this.externalFileAttributes),n==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var n=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=n.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=n.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=n.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=n.readInt(4))}},readExtraFields:function(n){var l,r,f,a=n.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});n.index+4<a;)l=n.readInt(2),r=n.readInt(2),f=n.readData(r),this.extraFields[l]={id:l,length:r,value:f};n.setIndex(a)},handleUTF8:function(){var n=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var l=this.findExtraFieldUnicodePath();if(l!==null)this.fileNameStr=l;else{var r=s.transformTo(n,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var a=s.transformTo(n,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var n=this.extraFields[28789];if(n){var l=o(n.value);return l.readInt(1)!==1||h(this.fileName)!==l.readInt(4)?null:c.utf8decode(l.readData(n.length-5))}return null},findExtraFieldUnicodeComment:function(){var n=this.extraFields[25461];if(n){var l=o(n.value);return l.readInt(1)!==1||h(this.fileComment)!==l.readInt(4)?null:c.utf8decode(l.readData(n.length-5))}return null}},R.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(v,R,g){function o(l,r,f){this.name=l,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=r,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var s=v("./stream/StreamHelper"),i=v("./stream/DataWorker"),h=v("./utf8"),c=v("./compressedObject"),y=v("./stream/GenericWorker");o.prototype={internalStream:function(l){var r=null,f="string";try{if(!l)throw new Error("No output type specified.");var a=(f=l.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),r=this._decompressWorker();var p=!this._dataBinary;p&&!a&&(r=r.pipe(new h.Utf8EncodeWorker)),!p&&a&&(r=r.pipe(new h.Utf8DecodeWorker))}catch(k){(r=new y("error")).error(k)}return new s(r,f,"")},async:function(l,r){return this.internalStream(l).accumulate(r)},nodeStream:function(l,r){return this.internalStream(l||"nodebuffer").toNodejsStream(r)},_compressWorker:function(l,r){if(this._data instanceof c&&this._data.compression.magic===l.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new h.Utf8EncodeWorker)),c.createWorkerFrom(f,l,r)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof y?this._data:new i(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},n=0;n<m.length;n++)o.prototype[m[n]]=_;R.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(v,R,g){(function(o){var s,i,h=o.MutationObserver||o.WebKitMutationObserver;if(h){var c=0,y=new h(l),m=o.document.createTextNode("");y.observe(m,{characterData:!0}),s=function(){m.data=c=++c%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var r=o.document.createElement("script");r.onreadystatechange=function(){l(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},o.document.documentElement.appendChild(r)}:function(){setTimeout(l,0)};else{var _=new o.MessageChannel;_.port1.onmessage=l,s=function(){_.port2.postMessage(0)}}var n=[];function l(){var r,f;i=!0;for(var a=n.length;a;){for(f=n,n=[],r=-1;++r<a;)f[r]();a=n.length}i=!1}R.exports=function(r){n.push(r)!==1||i||s()}}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(v,R,g){var o=v("immediate");function s(){}var i={},h=["REJECTED"],c=["FULFILLED"],y=["PENDING"];function m(a){if(typeof a!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,a!==s&&r(this,a)}function _(a,p,k){this.promise=a,typeof p=="function"&&(this.onFulfilled=p,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function n(a,p,k){o(function(){var S;try{S=p(k)}catch(E){return i.reject(a,E)}S===a?i.reject(a,new TypeError("Cannot resolve promise with itself")):i.resolve(a,S)})}function l(a){var p=a&&a.then;if(a&&(typeof a=="object"||typeof a=="function")&&typeof p=="function")return function(){p.apply(a,arguments)}}function r(a,p){var k=!1;function S(O){k||(k=!0,i.reject(a,O))}function E(O){k||(k=!0,i.resolve(a,O))}var D=f(function(){p(E,S)});D.status==="error"&&S(D.value)}function f(a,p){var k={};try{k.value=a(p),k.status="success"}catch(S){k.status="error",k.value=S}return k}(R.exports=m).prototype.finally=function(a){if(typeof a!="function")return this;var p=this.constructor;return this.then(function(k){return p.resolve(a()).then(function(){return k})},function(k){return p.resolve(a()).then(function(){throw k})})},m.prototype.catch=function(a){return this.then(null,a)},m.prototype.then=function(a,p){if(typeof a!="function"&&this.state===c||typeof p!="function"&&this.state===h)return this;var k=new this.constructor(s);return this.state!==y?n(k,this.state===c?a:p,this.outcome):this.queue.push(new _(k,a,p)),k},_.prototype.callFulfilled=function(a){i.resolve(this.promise,a)},_.prototype.otherCallFulfilled=function(a){n(this.promise,this.onFulfilled,a)},_.prototype.callRejected=function(a){i.reject(this.promise,a)},_.prototype.otherCallRejected=function(a){n(this.promise,this.onRejected,a)},i.resolve=function(a,p){var k=f(l,p);if(k.status==="error")return i.reject(a,k.value);var S=k.value;if(S)r(a,S);else{a.state=c,a.outcome=p;for(var E=-1,D=a.queue.length;++E<D;)a.queue[E].callFulfilled(p)}return a},i.reject=function(a,p){a.state=h,a.outcome=p;for(var k=-1,S=a.queue.length;++k<S;)a.queue[k].callRejected(p);return a},m.resolve=function(a){return a instanceof this?a:i.resolve(new this(s),a)},m.reject=function(a){var p=new this(s);return i.reject(p,a)},m.all=function(a){var p=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=a.length,S=!1;if(!k)return this.resolve([]);for(var E=new Array(k),D=0,O=-1,j=new this(s);++O<k;)I(a[O],O);return j;function I(G,$){p.resolve(G).then(function(b){E[$]=b,++D!==k||S||(S=!0,i.resolve(j,E))},function(b){S||(S=!0,i.reject(j,b))})}},m.race=function(a){var p=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=a.length,S=!1;if(!k)return this.resolve([]);for(var E=-1,D=new this(s);++E<k;)O=a[E],p.resolve(O).then(function(j){S||(S=!0,i.resolve(D,j))},function(j){S||(S=!0,i.reject(D,j))});var O;return D}},{immediate:36}],38:[function(v,R,g){var o={};(0,v("./lib/utils/common").assign)(o,v("./lib/deflate"),v("./lib/inflate"),v("./lib/zlib/constants")),R.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(v,R,g){var o=v("./zlib/deflate"),s=v("./utils/common"),i=v("./utils/strings"),h=v("./zlib/messages"),c=v("./zlib/zstream"),y=Object.prototype.toString,m=0,_=-1,n=0,l=8;function r(a){if(!(this instanceof r))return new r(a);this.options=s.assign({level:_,method:l,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},a||{});var p=this.options;p.raw&&0<p.windowBits?p.windowBits=-p.windowBits:p.gzip&&0<p.windowBits&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var k=o.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(k!==m)throw new Error(h[k]);if(p.header&&o.deflateSetHeader(this.strm,p.header),p.dictionary){var S;if(S=typeof p.dictionary=="string"?i.string2buf(p.dictionary):y.call(p.dictionary)==="[object ArrayBuffer]"?new Uint8Array(p.dictionary):p.dictionary,(k=o.deflateSetDictionary(this.strm,S))!==m)throw new Error(h[k]);this._dict_set=!0}}function f(a,p){var k=new r(p);if(k.push(a,!0),k.err)throw k.msg||h[k.err];return k.result}r.prototype.push=function(a,p){var k,S,E=this.strm,D=this.options.chunkSize;if(this.ended)return!1;S=p===~~p?p:p===!0?4:0,typeof a=="string"?E.input=i.string2buf(a):y.call(a)==="[object ArrayBuffer]"?E.input=new Uint8Array(a):E.input=a,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new s.Buf8(D),E.next_out=0,E.avail_out=D),(k=o.deflate(E,S))!==1&&k!==m)return this.onEnd(k),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(s.shrinkBuf(E.output,E.next_out))):this.onData(s.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&k!==1);return S===4?(k=o.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===m):S!==2||(this.onEnd(m),!(E.avail_out=0))},r.prototype.onData=function(a){this.chunks.push(a)},r.prototype.onEnd=function(a){a===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},g.Deflate=r,g.deflate=f,g.deflateRaw=function(a,p){return(p=p||{}).raw=!0,f(a,p)},g.gzip=function(a,p){return(p=p||{}).gzip=!0,f(a,p)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(v,R,g){var o=v("./zlib/inflate"),s=v("./utils/common"),i=v("./utils/strings"),h=v("./zlib/constants"),c=v("./zlib/messages"),y=v("./zlib/zstream"),m=v("./zlib/gzheader"),_=Object.prototype.toString;function n(r){if(!(this instanceof n))return new n(r);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},r||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||r&&r.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&!(15&f.windowBits)&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var a=o.inflateInit2(this.strm,f.windowBits);if(a!==h.Z_OK)throw new Error(c[a]);this.header=new m,o.inflateGetHeader(this.strm,this.header)}function l(r,f){var a=new n(f);if(a.push(r,!0),a.err)throw a.msg||c[a.err];return a.result}n.prototype.push=function(r,f){var a,p,k,S,E,D,O=this.strm,j=this.options.chunkSize,I=this.options.dictionary,G=!1;if(this.ended)return!1;p=f===~~f?f:f===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof r=="string"?O.input=i.binstring2buf(r):_.call(r)==="[object ArrayBuffer]"?O.input=new Uint8Array(r):O.input=r,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new s.Buf8(j),O.next_out=0,O.avail_out=j),(a=o.inflate(O,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&I&&(D=typeof I=="string"?i.string2buf(I):_.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,a=o.inflateSetDictionary(this.strm,D)),a===h.Z_BUF_ERROR&&G===!0&&(a=h.Z_OK,G=!1),a!==h.Z_STREAM_END&&a!==h.Z_OK)return this.onEnd(a),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&a!==h.Z_STREAM_END&&(O.avail_in!==0||p!==h.Z_FINISH&&p!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=i.utf8border(O.output,O.next_out),S=O.next_out-k,E=i.buf2string(O.output,k),O.next_out=S,O.avail_out=j-S,S&&s.arraySet(O.output,O.output,k,S,0),this.onData(E)):this.onData(s.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(G=!0)}while((0<O.avail_in||O.avail_out===0)&&a!==h.Z_STREAM_END);return a===h.Z_STREAM_END&&(p=h.Z_FINISH),p===h.Z_FINISH?(a=o.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===h.Z_OK):p!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(O.avail_out=0))},n.prototype.onData=function(r){this.chunks.push(r)},n.prototype.onEnd=function(r){r===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg},g.Inflate=n,g.inflate=l,g.inflateRaw=function(r,f){return(f=f||{}).raw=!0,l(r,f)},g.ungzip=l},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(v,R,g){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";g.assign=function(h){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var y=c.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var m in y)y.hasOwnProperty(m)&&(h[m]=y[m])}}return h},g.shrinkBuf=function(h,c){return h.length===c?h:h.subarray?h.subarray(0,c):(h.length=c,h)};var s={arraySet:function(h,c,y,m,_){if(c.subarray&&h.subarray)h.set(c.subarray(y,y+m),_);else for(var n=0;n<m;n++)h[_+n]=c[y+n]},flattenChunks:function(h){var c,y,m,_,n,l;for(c=m=0,y=h.length;c<y;c++)m+=h[c].length;for(l=new Uint8Array(m),c=_=0,y=h.length;c<y;c++)n=h[c],l.set(n,_),_+=n.length;return l}},i={arraySet:function(h,c,y,m,_){for(var n=0;n<m;n++)h[_+n]=c[y+n]},flattenChunks:function(h){return[].concat.apply([],h)}};g.setTyped=function(h){h?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,s)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,i))},g.setTyped(o)},{}],42:[function(v,R,g){var o=v("./common"),s=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var h=new o.Buf8(256),c=0;c<256;c++)h[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function y(m,_){if(_<65537&&(m.subarray&&i||!m.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(m,_));for(var n="",l=0;l<_;l++)n+=String.fromCharCode(m[l]);return n}h[254]=h[254]=1,g.string2buf=function(m){var _,n,l,r,f,a=m.length,p=0;for(r=0;r<a;r++)(64512&(n=m.charCodeAt(r)))==55296&&r+1<a&&(64512&(l=m.charCodeAt(r+1)))==56320&&(n=65536+(n-55296<<10)+(l-56320),r++),p+=n<128?1:n<2048?2:n<65536?3:4;for(_=new o.Buf8(p),r=f=0;f<p;r++)(64512&(n=m.charCodeAt(r)))==55296&&r+1<a&&(64512&(l=m.charCodeAt(r+1)))==56320&&(n=65536+(n-55296<<10)+(l-56320),r++),n<128?_[f++]=n:(n<2048?_[f++]=192|n>>>6:(n<65536?_[f++]=224|n>>>12:(_[f++]=240|n>>>18,_[f++]=128|n>>>12&63),_[f++]=128|n>>>6&63),_[f++]=128|63&n);return _},g.buf2binstring=function(m){return y(m,m.length)},g.binstring2buf=function(m){for(var _=new o.Buf8(m.length),n=0,l=_.length;n<l;n++)_[n]=m.charCodeAt(n);return _},g.buf2string=function(m,_){var n,l,r,f,a=_||m.length,p=new Array(2*a);for(n=l=0;n<a;)if((r=m[n++])<128)p[l++]=r;else if(4<(f=h[r]))p[l++]=65533,n+=f-1;else{for(r&=f===2?31:f===3?15:7;1<f&&n<a;)r=r<<6|63&m[n++],f--;1<f?p[l++]=65533:r<65536?p[l++]=r:(r-=65536,p[l++]=55296|r>>10&1023,p[l++]=56320|1023&r)}return y(p,l)},g.utf8border=function(m,_){var n;for((_=_||m.length)>m.length&&(_=m.length),n=_-1;0<=n&&(192&m[n])==128;)n--;return n<0||n===0?_:n+h[m[n]]>_?n:_}},{"./common":41}],43:[function(v,R,g){R.exports=function(o,s,i,h){for(var c=65535&o|0,y=o>>>16&65535|0,m=0;i!==0;){for(i-=m=2e3<i?2e3:i;y=y+(c=c+s[h++]|0)|0,--m;);c%=65521,y%=65521}return c|y<<16|0}},{}],44:[function(v,R,g){R.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(v,R,g){var o=function(){for(var s,i=[],h=0;h<256;h++){s=h;for(var c=0;c<8;c++)s=1&s?3988292384^s>>>1:s>>>1;i[h]=s}return i}();R.exports=function(s,i,h,c){var y=o,m=c+h;s^=-1;for(var _=c;_<m;_++)s=s>>>8^y[255&(s^i[_])];return-1^s}},{}],46:[function(v,R,g){var o,s=v("../utils/common"),i=v("./trees"),h=v("./adler32"),c=v("./crc32"),y=v("./messages"),m=0,_=4,n=0,l=-2,r=-1,f=4,a=2,p=8,k=9,S=286,E=30,D=19,O=2*S+1,j=15,I=3,G=258,$=G+I+1,b=42,B=113,e=1,U=2,Q=3,N=4;function tt(t,F){return t.msg=y[F],F}function M(t){return(t<<1)-(4<t?9:0)}function J(t){for(var F=t.length;0<=--F;)t[F]=0}function z(t){var F=t.state,C=F.pending;C>t.avail_out&&(C=t.avail_out),C!==0&&(s.arraySet(t.output,F.pending_buf,F.pending_out,C,t.next_out),t.next_out+=C,F.pending_out+=C,t.total_out+=C,t.avail_out-=C,F.pending-=C,F.pending===0&&(F.pending_out=0))}function T(t,F){i._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,F),t.block_start=t.strstart,z(t.strm)}function q(t,F){t.pending_buf[t.pending++]=F}function X(t,F){t.pending_buf[t.pending++]=F>>>8&255,t.pending_buf[t.pending++]=255&F}function H(t,F){var C,d,u=t.max_chain_length,x=t.strstart,P=t.prev_length,L=t.nice_match,A=t.strstart>t.w_size-$?t.strstart-(t.w_size-$):0,W=t.window,Y=t.w_mask,Z=t.prev,K=t.strstart+G,it=W[x+P-1],rt=W[x+P];t.prev_length>=t.good_match&&(u>>=2),L>t.lookahead&&(L=t.lookahead);do if(W[(C=F)+P]===rt&&W[C+P-1]===it&&W[C]===W[x]&&W[++C]===W[x+1]){x+=2,C++;do;while(W[++x]===W[++C]&&W[++x]===W[++C]&&W[++x]===W[++C]&&W[++x]===W[++C]&&W[++x]===W[++C]&&W[++x]===W[++C]&&W[++x]===W[++C]&&W[++x]===W[++C]&&x<K);if(d=G-(K-x),x=K-G,P<d){if(t.match_start=F,L<=(P=d))break;it=W[x+P-1],rt=W[x+P]}}while((F=Z[F&Y])>A&&--u!=0);return P<=t.lookahead?P:t.lookahead}function at(t){var F,C,d,u,x,P,L,A,W,Y,Z=t.w_size;do{if(u=t.window_size-t.lookahead-t.strstart,t.strstart>=Z+(Z-$)){for(s.arraySet(t.window,t.window,Z,Z,0),t.match_start-=Z,t.strstart-=Z,t.block_start-=Z,F=C=t.hash_size;d=t.head[--F],t.head[F]=Z<=d?d-Z:0,--C;);for(F=C=Z;d=t.prev[--F],t.prev[F]=Z<=d?d-Z:0,--C;);u+=Z}if(t.strm.avail_in===0)break;if(P=t.strm,L=t.window,A=t.strstart+t.lookahead,W=u,Y=void 0,Y=P.avail_in,W<Y&&(Y=W),C=Y===0?0:(P.avail_in-=Y,s.arraySet(L,P.input,P.next_in,Y,A),P.state.wrap===1?P.adler=h(P.adler,L,Y,A):P.state.wrap===2&&(P.adler=c(P.adler,L,Y,A)),P.next_in+=Y,P.total_in+=Y,Y),t.lookahead+=C,t.lookahead+t.insert>=I)for(x=t.strstart-t.insert,t.ins_h=t.window[x],t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+I-1])&t.hash_mask,t.prev[x&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=x,x++,t.insert--,!(t.lookahead+t.insert<I)););}while(t.lookahead<$&&t.strm.avail_in!==0)}function ht(t,F){for(var C,d;;){if(t.lookahead<$){if(at(t),t.lookahead<$&&F===m)return e;if(t.lookahead===0)break}if(C=0,t.lookahead>=I&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,C=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),C!==0&&t.strstart-C<=t.w_size-$&&(t.match_length=H(t,C)),t.match_length>=I)if(d=i._tr_tally(t,t.strstart-t.match_start,t.match_length-I),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=I){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,C=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else d=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(d&&(T(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<I-1?t.strstart:I-1,F===_?(T(t,!0),t.strm.avail_out===0?Q:N):t.last_lit&&(T(t,!1),t.strm.avail_out===0)?e:U}function et(t,F){for(var C,d,u;;){if(t.lookahead<$){if(at(t),t.lookahead<$&&F===m)return e;if(t.lookahead===0)break}if(C=0,t.lookahead>=I&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,C=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=I-1,C!==0&&t.prev_length<t.max_lazy_match&&t.strstart-C<=t.w_size-$&&(t.match_length=H(t,C),t.match_length<=5&&(t.strategy===1||t.match_length===I&&4096<t.strstart-t.match_start)&&(t.match_length=I-1)),t.prev_length>=I&&t.match_length<=t.prev_length){for(u=t.strstart+t.lookahead-I,d=i._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-I),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=u&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+I-1])&t.hash_mask,C=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=I-1,t.strstart++,d&&(T(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((d=i._tr_tally(t,0,t.window[t.strstart-1]))&&T(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(d=i._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<I-1?t.strstart:I-1,F===_?(T(t,!0),t.strm.avail_out===0?Q:N):t.last_lit&&(T(t,!1),t.strm.avail_out===0)?e:U}function nt(t,F,C,d,u){this.good_length=t,this.max_lazy=F,this.nice_length=C,this.max_chain=d,this.func=u}function ut(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*O),this.dyn_dtree=new s.Buf16(2*(2*E+1)),this.bl_tree=new s.Buf16(2*(2*D+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(j+1),this.heap=new s.Buf16(2*S+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*S+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function st(t){var F;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=a,(F=t.state).pending=0,F.pending_out=0,F.wrap<0&&(F.wrap=-F.wrap),F.status=F.wrap?b:B,t.adler=F.wrap===2?0:1,F.last_flush=m,i._tr_init(F),n):tt(t,l)}function lt(t){var F=st(t);return F===n&&function(C){C.window_size=2*C.w_size,J(C.head),C.max_lazy_match=o[C.level].max_lazy,C.good_match=o[C.level].good_length,C.nice_match=o[C.level].nice_length,C.max_chain_length=o[C.level].max_chain,C.strstart=0,C.block_start=0,C.lookahead=0,C.insert=0,C.match_length=C.prev_length=I-1,C.match_available=0,C.ins_h=0}(t.state),F}function dt(t,F,C,d,u,x){if(!t)return l;var P=1;if(F===r&&(F=6),d<0?(P=0,d=-d):15<d&&(P=2,d-=16),u<1||k<u||C!==p||d<8||15<d||F<0||9<F||x<0||f<x)return tt(t,l);d===8&&(d=9);var L=new ut;return(t.state=L).strm=t,L.wrap=P,L.gzhead=null,L.w_bits=d,L.w_size=1<<L.w_bits,L.w_mask=L.w_size-1,L.hash_bits=u+7,L.hash_size=1<<L.hash_bits,L.hash_mask=L.hash_size-1,L.hash_shift=~~((L.hash_bits+I-1)/I),L.window=new s.Buf8(2*L.w_size),L.head=new s.Buf16(L.hash_size),L.prev=new s.Buf16(L.w_size),L.lit_bufsize=1<<u+6,L.pending_buf_size=4*L.lit_bufsize,L.pending_buf=new s.Buf8(L.pending_buf_size),L.d_buf=1*L.lit_bufsize,L.l_buf=3*L.lit_bufsize,L.level=F,L.strategy=x,L.method=C,lt(t)}o=[new nt(0,0,0,0,function(t,F){var C=65535;for(C>t.pending_buf_size-5&&(C=t.pending_buf_size-5);;){if(t.lookahead<=1){if(at(t),t.lookahead===0&&F===m)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var d=t.block_start+C;if((t.strstart===0||t.strstart>=d)&&(t.lookahead=t.strstart-d,t.strstart=d,T(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-$&&(T(t,!1),t.strm.avail_out===0))return e}return t.insert=0,F===_?(T(t,!0),t.strm.avail_out===0?Q:N):(t.strstart>t.block_start&&(T(t,!1),t.strm.avail_out),e)}),new nt(4,4,8,4,ht),new nt(4,5,16,8,ht),new nt(4,6,32,32,ht),new nt(4,4,16,16,et),new nt(8,16,32,32,et),new nt(8,16,128,128,et),new nt(8,32,128,256,et),new nt(32,128,258,1024,et),new nt(32,258,258,4096,et)],g.deflateInit=function(t,F){return dt(t,F,p,15,8,0)},g.deflateInit2=dt,g.deflateReset=lt,g.deflateResetKeep=st,g.deflateSetHeader=function(t,F){return t&&t.state?t.state.wrap!==2?l:(t.state.gzhead=F,n):l},g.deflate=function(t,F){var C,d,u,x;if(!t||!t.state||5<F||F<0)return t?tt(t,l):l;if(d=t.state,!t.output||!t.input&&t.avail_in!==0||d.status===666&&F!==_)return tt(t,t.avail_out===0?-5:l);if(d.strm=t,C=d.last_flush,d.last_flush=F,d.status===b)if(d.wrap===2)t.adler=0,q(d,31),q(d,139),q(d,8),d.gzhead?(q(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),q(d,255&d.gzhead.time),q(d,d.gzhead.time>>8&255),q(d,d.gzhead.time>>16&255),q(d,d.gzhead.time>>24&255),q(d,d.level===9?2:2<=d.strategy||d.level<2?4:0),q(d,255&d.gzhead.os),d.gzhead.extra&&d.gzhead.extra.length&&(q(d,255&d.gzhead.extra.length),q(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(t.adler=c(t.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=69):(q(d,0),q(d,0),q(d,0),q(d,0),q(d,0),q(d,d.level===9?2:2<=d.strategy||d.level<2?4:0),q(d,3),d.status=B);else{var P=p+(d.w_bits-8<<4)<<8;P|=(2<=d.strategy||d.level<2?0:d.level<6?1:d.level===6?2:3)<<6,d.strstart!==0&&(P|=32),P+=31-P%31,d.status=B,X(d,P),d.strstart!==0&&(X(d,t.adler>>>16),X(d,65535&t.adler)),t.adler=1}if(d.status===69)if(d.gzhead.extra){for(u=d.pending;d.gzindex<(65535&d.gzhead.extra.length)&&(d.pending!==d.pending_buf_size||(d.gzhead.hcrc&&d.pending>u&&(t.adler=c(t.adler,d.pending_buf,d.pending-u,u)),z(t),u=d.pending,d.pending!==d.pending_buf_size));)q(d,255&d.gzhead.extra[d.gzindex]),d.gzindex++;d.gzhead.hcrc&&d.pending>u&&(t.adler=c(t.adler,d.pending_buf,d.pending-u,u)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=73)}else d.status=73;if(d.status===73)if(d.gzhead.name){u=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>u&&(t.adler=c(t.adler,d.pending_buf,d.pending-u,u)),z(t),u=d.pending,d.pending===d.pending_buf_size)){x=1;break}x=d.gzindex<d.gzhead.name.length?255&d.gzhead.name.charCodeAt(d.gzindex++):0,q(d,x)}while(x!==0);d.gzhead.hcrc&&d.pending>u&&(t.adler=c(t.adler,d.pending_buf,d.pending-u,u)),x===0&&(d.gzindex=0,d.status=91)}else d.status=91;if(d.status===91)if(d.gzhead.comment){u=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>u&&(t.adler=c(t.adler,d.pending_buf,d.pending-u,u)),z(t),u=d.pending,d.pending===d.pending_buf_size)){x=1;break}x=d.gzindex<d.gzhead.comment.length?255&d.gzhead.comment.charCodeAt(d.gzindex++):0,q(d,x)}while(x!==0);d.gzhead.hcrc&&d.pending>u&&(t.adler=c(t.adler,d.pending_buf,d.pending-u,u)),x===0&&(d.status=103)}else d.status=103;if(d.status===103&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&z(t),d.pending+2<=d.pending_buf_size&&(q(d,255&t.adler),q(d,t.adler>>8&255),t.adler=0,d.status=B)):d.status=B),d.pending!==0){if(z(t),t.avail_out===0)return d.last_flush=-1,n}else if(t.avail_in===0&&M(F)<=M(C)&&F!==_)return tt(t,-5);if(d.status===666&&t.avail_in!==0)return tt(t,-5);if(t.avail_in!==0||d.lookahead!==0||F!==m&&d.status!==666){var L=d.strategy===2?function(A,W){for(var Y;;){if(A.lookahead===0&&(at(A),A.lookahead===0)){if(W===m)return e;break}if(A.match_length=0,Y=i._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++,Y&&(T(A,!1),A.strm.avail_out===0))return e}return A.insert=0,W===_?(T(A,!0),A.strm.avail_out===0?Q:N):A.last_lit&&(T(A,!1),A.strm.avail_out===0)?e:U}(d,F):d.strategy===3?function(A,W){for(var Y,Z,K,it,rt=A.window;;){if(A.lookahead<=G){if(at(A),A.lookahead<=G&&W===m)return e;if(A.lookahead===0)break}if(A.match_length=0,A.lookahead>=I&&0<A.strstart&&(Z=rt[K=A.strstart-1])===rt[++K]&&Z===rt[++K]&&Z===rt[++K]){it=A.strstart+G;do;while(Z===rt[++K]&&Z===rt[++K]&&Z===rt[++K]&&Z===rt[++K]&&Z===rt[++K]&&Z===rt[++K]&&Z===rt[++K]&&Z===rt[++K]&&K<it);A.match_length=G-(it-K),A.match_length>A.lookahead&&(A.match_length=A.lookahead)}if(A.match_length>=I?(Y=i._tr_tally(A,1,A.match_length-I),A.lookahead-=A.match_length,A.strstart+=A.match_length,A.match_length=0):(Y=i._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++),Y&&(T(A,!1),A.strm.avail_out===0))return e}return A.insert=0,W===_?(T(A,!0),A.strm.avail_out===0?Q:N):A.last_lit&&(T(A,!1),A.strm.avail_out===0)?e:U}(d,F):o[d.level].func(d,F);if(L!==Q&&L!==N||(d.status=666),L===e||L===Q)return t.avail_out===0&&(d.last_flush=-1),n;if(L===U&&(F===1?i._tr_align(d):F!==5&&(i._tr_stored_block(d,0,0,!1),F===3&&(J(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),z(t),t.avail_out===0))return d.last_flush=-1,n}return F!==_?n:d.wrap<=0?1:(d.wrap===2?(q(d,255&t.adler),q(d,t.adler>>8&255),q(d,t.adler>>16&255),q(d,t.adler>>24&255),q(d,255&t.total_in),q(d,t.total_in>>8&255),q(d,t.total_in>>16&255),q(d,t.total_in>>24&255)):(X(d,t.adler>>>16),X(d,65535&t.adler)),z(t),0<d.wrap&&(d.wrap=-d.wrap),d.pending!==0?n:1)},g.deflateEnd=function(t){var F;return t&&t.state?(F=t.state.status)!==b&&F!==69&&F!==73&&F!==91&&F!==103&&F!==B&&F!==666?tt(t,l):(t.state=null,F===B?tt(t,-3):n):l},g.deflateSetDictionary=function(t,F){var C,d,u,x,P,L,A,W,Y=F.length;if(!t||!t.state||(x=(C=t.state).wrap)===2||x===1&&C.status!==b||C.lookahead)return l;for(x===1&&(t.adler=h(t.adler,F,Y,0)),C.wrap=0,Y>=C.w_size&&(x===0&&(J(C.head),C.strstart=0,C.block_start=0,C.insert=0),W=new s.Buf8(C.w_size),s.arraySet(W,F,Y-C.w_size,C.w_size,0),F=W,Y=C.w_size),P=t.avail_in,L=t.next_in,A=t.input,t.avail_in=Y,t.next_in=0,t.input=F,at(C);C.lookahead>=I;){for(d=C.strstart,u=C.lookahead-(I-1);C.ins_h=(C.ins_h<<C.hash_shift^C.window[d+I-1])&C.hash_mask,C.prev[d&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=d,d++,--u;);C.strstart=d,C.lookahead=I-1,at(C)}return C.strstart+=C.lookahead,C.block_start=C.strstart,C.insert=C.lookahead,C.lookahead=0,C.match_length=C.prev_length=I-1,C.match_available=0,t.next_in=L,t.input=A,t.avail_in=P,C.wrap=x,n},g.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(v,R,g){R.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(v,R,g){R.exports=function(o,s){var i,h,c,y,m,_,n,l,r,f,a,p,k,S,E,D,O,j,I,G,$,b,B,e,U;i=o.state,h=o.next_in,e=o.input,c=h+(o.avail_in-5),y=o.next_out,U=o.output,m=y-(s-o.avail_out),_=y+(o.avail_out-257),n=i.dmax,l=i.wsize,r=i.whave,f=i.wnext,a=i.window,p=i.hold,k=i.bits,S=i.lencode,E=i.distcode,D=(1<<i.lenbits)-1,O=(1<<i.distbits)-1;t:do{k<15&&(p+=e[h++]<<k,k+=8,p+=e[h++]<<k,k+=8),j=S[p&D];e:for(;;){if(p>>>=I=j>>>24,k-=I,(I=j>>>16&255)===0)U[y++]=65535&j;else{if(!(16&I)){if(!(64&I)){j=S[(65535&j)+(p&(1<<I)-1)];continue e}if(32&I){i.mode=12;break t}o.msg="invalid literal/length code",i.mode=30;break t}G=65535&j,(I&=15)&&(k<I&&(p+=e[h++]<<k,k+=8),G+=p&(1<<I)-1,p>>>=I,k-=I),k<15&&(p+=e[h++]<<k,k+=8,p+=e[h++]<<k,k+=8),j=E[p&O];r:for(;;){if(p>>>=I=j>>>24,k-=I,!(16&(I=j>>>16&255))){if(!(64&I)){j=E[(65535&j)+(p&(1<<I)-1)];continue r}o.msg="invalid distance code",i.mode=30;break t}if($=65535&j,k<(I&=15)&&(p+=e[h++]<<k,(k+=8)<I&&(p+=e[h++]<<k,k+=8)),n<($+=p&(1<<I)-1)){o.msg="invalid distance too far back",i.mode=30;break t}if(p>>>=I,k-=I,(I=y-m)<$){if(r<(I=$-I)&&i.sane){o.msg="invalid distance too far back",i.mode=30;break t}if(B=a,(b=0)===f){if(b+=l-I,I<G){for(G-=I;U[y++]=a[b++],--I;);b=y-$,B=U}}else if(f<I){if(b+=l+f-I,(I-=f)<G){for(G-=I;U[y++]=a[b++],--I;);if(b=0,f<G){for(G-=I=f;U[y++]=a[b++],--I;);b=y-$,B=U}}}else if(b+=f-I,I<G){for(G-=I;U[y++]=a[b++],--I;);b=y-$,B=U}for(;2<G;)U[y++]=B[b++],U[y++]=B[b++],U[y++]=B[b++],G-=3;G&&(U[y++]=B[b++],1<G&&(U[y++]=B[b++]))}else{for(b=y-$;U[y++]=U[b++],U[y++]=U[b++],U[y++]=U[b++],2<(G-=3););G&&(U[y++]=U[b++],1<G&&(U[y++]=U[b++]))}break}}break}}while(h<c&&y<_);h-=G=k>>3,p&=(1<<(k-=G<<3))-1,o.next_in=h,o.next_out=y,o.avail_in=h<c?c-h+5:5-(h-c),o.avail_out=y<_?_-y+257:257-(y-_),i.hold=p,i.bits=k}},{}],49:[function(v,R,g){var o=v("../utils/common"),s=v("./adler32"),i=v("./crc32"),h=v("./inffast"),c=v("./inftrees"),y=1,m=2,_=0,n=-2,l=1,r=852,f=592;function a(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(b){var B;return b&&b.state?(B=b.state,b.total_in=b.total_out=B.total=0,b.msg="",B.wrap&&(b.adler=1&B.wrap),B.mode=l,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new o.Buf32(r),B.distcode=B.distdyn=new o.Buf32(f),B.sane=1,B.back=-1,_):n}function S(b){var B;return b&&b.state?((B=b.state).wsize=0,B.whave=0,B.wnext=0,k(b)):n}function E(b,B){var e,U;return b&&b.state?(U=b.state,B<0?(e=0,B=-B):(e=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?n:(U.window!==null&&U.wbits!==B&&(U.window=null),U.wrap=e,U.wbits=B,S(b))):n}function D(b,B){var e,U;return b?(U=new p,(b.state=U).window=null,(e=E(b,B))!==_&&(b.state=null),e):n}var O,j,I=!0;function G(b){if(I){var B;for(O=new o.Buf32(512),j=new o.Buf32(32),B=0;B<144;)b.lens[B++]=8;for(;B<256;)b.lens[B++]=9;for(;B<280;)b.lens[B++]=7;for(;B<288;)b.lens[B++]=8;for(c(y,b.lens,0,288,O,0,b.work,{bits:9}),B=0;B<32;)b.lens[B++]=5;c(m,b.lens,0,32,j,0,b.work,{bits:5}),I=!1}b.lencode=O,b.lenbits=9,b.distcode=j,b.distbits=5}function $(b,B,e,U){var Q,N=b.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new o.Buf8(N.wsize)),U>=N.wsize?(o.arraySet(N.window,B,e-N.wsize,N.wsize,0),N.wnext=0,N.whave=N.wsize):(U<(Q=N.wsize-N.wnext)&&(Q=U),o.arraySet(N.window,B,e-U,Q,N.wnext),(U-=Q)?(o.arraySet(N.window,B,e-U,U,0),N.wnext=U,N.whave=N.wsize):(N.wnext+=Q,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=Q))),0}g.inflateReset=S,g.inflateReset2=E,g.inflateResetKeep=k,g.inflateInit=function(b){return D(b,15)},g.inflateInit2=D,g.inflate=function(b,B){var e,U,Q,N,tt,M,J,z,T,q,X,H,at,ht,et,nt,ut,st,lt,dt,t,F,C,d,u=0,x=new o.Buf8(4),P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&b.avail_in!==0)return n;(e=b.state).mode===12&&(e.mode=13),tt=b.next_out,Q=b.output,J=b.avail_out,N=b.next_in,U=b.input,M=b.avail_in,z=e.hold,T=e.bits,q=M,X=J,F=_;t:for(;;)switch(e.mode){case l:if(e.wrap===0){e.mode=13;break}for(;T<16;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}if(2&e.wrap&&z===35615){x[e.check=0]=255&z,x[1]=z>>>8&255,e.check=i(e.check,x,2,0),T=z=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&z)<<8)+(z>>8))%31){b.msg="incorrect header check",e.mode=30;break}if((15&z)!=8){b.msg="unknown compression method",e.mode=30;break}if(T-=4,t=8+(15&(z>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){b.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,b.adler=e.check=1,e.mode=512&z?10:12,T=z=0;break;case 2:for(;T<16;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}if(e.flags=z,(255&e.flags)!=8){b.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){b.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=z>>8&1),512&e.flags&&(x[0]=255&z,x[1]=z>>>8&255,e.check=i(e.check,x,2,0)),T=z=0,e.mode=3;case 3:for(;T<32;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}e.head&&(e.head.time=z),512&e.flags&&(x[0]=255&z,x[1]=z>>>8&255,x[2]=z>>>16&255,x[3]=z>>>24&255,e.check=i(e.check,x,4,0)),T=z=0,e.mode=4;case 4:for(;T<16;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}e.head&&(e.head.xflags=255&z,e.head.os=z>>8),512&e.flags&&(x[0]=255&z,x[1]=z>>>8&255,e.check=i(e.check,x,2,0)),T=z=0,e.mode=5;case 5:if(1024&e.flags){for(;T<16;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}e.length=z,e.head&&(e.head.extra_len=z),512&e.flags&&(x[0]=255&z,x[1]=z>>>8&255,e.check=i(e.check,x,2,0)),T=z=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(M<(H=e.length)&&(H=M),H&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),o.arraySet(e.head.extra,U,N,H,t)),512&e.flags&&(e.check=i(e.check,U,H,N)),M-=H,N+=H,e.length-=H),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(M===0)break t;for(H=0;t=U[N+H++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&H<M;);if(512&e.flags&&(e.check=i(e.check,U,H,N)),M-=H,N+=H,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(M===0)break t;for(H=0;t=U[N+H++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&H<M;);if(512&e.flags&&(e.check=i(e.check,U,H,N)),M-=H,N+=H,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;T<16;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}if(z!==(65535&e.check)){b.msg="header crc mismatch",e.mode=30;break}T=z=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),b.adler=e.check=0,e.mode=12;break;case 10:for(;T<32;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}b.adler=e.check=a(z),T=z=0,e.mode=11;case 11:if(e.havedict===0)return b.next_out=tt,b.avail_out=J,b.next_in=N,b.avail_in=M,e.hold=z,e.bits=T,2;b.adler=e.check=1,e.mode=12;case 12:if(B===5||B===6)break t;case 13:if(e.last){z>>>=7&T,T-=7&T,e.mode=27;break}for(;T<3;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}switch(e.last=1&z,T-=1,3&(z>>>=1)){case 0:e.mode=14;break;case 1:if(G(e),e.mode=20,B!==6)break;z>>>=2,T-=2;break t;case 2:e.mode=17;break;case 3:b.msg="invalid block type",e.mode=30}z>>>=2,T-=2;break;case 14:for(z>>>=7&T,T-=7&T;T<32;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}if((65535&z)!=(z>>>16^65535)){b.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&z,T=z=0,e.mode=15,B===6)break t;case 15:e.mode=16;case 16:if(H=e.length){if(M<H&&(H=M),J<H&&(H=J),H===0)break t;o.arraySet(Q,U,N,H,tt),M-=H,N+=H,J-=H,tt+=H,e.length-=H;break}e.mode=12;break;case 17:for(;T<14;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}if(e.nlen=257+(31&z),z>>>=5,T-=5,e.ndist=1+(31&z),z>>>=5,T-=5,e.ncode=4+(15&z),z>>>=4,T-=4,286<e.nlen||30<e.ndist){b.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;T<3;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}e.lens[P[e.have++]]=7&z,z>>>=3,T-=3}for(;e.have<19;)e.lens[P[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,C={bits:e.lenbits},F=c(0,e.lens,0,19,e.lencode,0,e.work,C),e.lenbits=C.bits,F){b.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;nt=(u=e.lencode[z&(1<<e.lenbits)-1])>>>16&255,ut=65535&u,!((et=u>>>24)<=T);){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}if(ut<16)z>>>=et,T-=et,e.lens[e.have++]=ut;else{if(ut===16){for(d=et+2;T<d;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}if(z>>>=et,T-=et,e.have===0){b.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],H=3+(3&z),z>>>=2,T-=2}else if(ut===17){for(d=et+3;T<d;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}T-=et,t=0,H=3+(7&(z>>>=et)),z>>>=3,T-=3}else{for(d=et+7;T<d;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}T-=et,t=0,H=11+(127&(z>>>=et)),z>>>=7,T-=7}if(e.have+H>e.nlen+e.ndist){b.msg="invalid bit length repeat",e.mode=30;break}for(;H--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){b.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,C={bits:e.lenbits},F=c(y,e.lens,0,e.nlen,e.lencode,0,e.work,C),e.lenbits=C.bits,F){b.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,C={bits:e.distbits},F=c(m,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,C),e.distbits=C.bits,F){b.msg="invalid distances set",e.mode=30;break}if(e.mode=20,B===6)break t;case 20:e.mode=21;case 21:if(6<=M&&258<=J){b.next_out=tt,b.avail_out=J,b.next_in=N,b.avail_in=M,e.hold=z,e.bits=T,h(b,X),tt=b.next_out,Q=b.output,J=b.avail_out,N=b.next_in,U=b.input,M=b.avail_in,z=e.hold,T=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;nt=(u=e.lencode[z&(1<<e.lenbits)-1])>>>16&255,ut=65535&u,!((et=u>>>24)<=T);){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}if(nt&&!(240&nt)){for(st=et,lt=nt,dt=ut;nt=(u=e.lencode[dt+((z&(1<<st+lt)-1)>>st)])>>>16&255,ut=65535&u,!(st+(et=u>>>24)<=T);){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}z>>>=st,T-=st,e.back+=st}if(z>>>=et,T-=et,e.back+=et,e.length=ut,nt===0){e.mode=26;break}if(32&nt){e.back=-1,e.mode=12;break}if(64&nt){b.msg="invalid literal/length code",e.mode=30;break}e.extra=15&nt,e.mode=22;case 22:if(e.extra){for(d=e.extra;T<d;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}e.length+=z&(1<<e.extra)-1,z>>>=e.extra,T-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;nt=(u=e.distcode[z&(1<<e.distbits)-1])>>>16&255,ut=65535&u,!((et=u>>>24)<=T);){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}if(!(240&nt)){for(st=et,lt=nt,dt=ut;nt=(u=e.distcode[dt+((z&(1<<st+lt)-1)>>st)])>>>16&255,ut=65535&u,!(st+(et=u>>>24)<=T);){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}z>>>=st,T-=st,e.back+=st}if(z>>>=et,T-=et,e.back+=et,64&nt){b.msg="invalid distance code",e.mode=30;break}e.offset=ut,e.extra=15&nt,e.mode=24;case 24:if(e.extra){for(d=e.extra;T<d;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}e.offset+=z&(1<<e.extra)-1,z>>>=e.extra,T-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){b.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(J===0)break t;if(H=X-J,e.offset>H){if((H=e.offset-H)>e.whave&&e.sane){b.msg="invalid distance too far back",e.mode=30;break}at=H>e.wnext?(H-=e.wnext,e.wsize-H):e.wnext-H,H>e.length&&(H=e.length),ht=e.window}else ht=Q,at=tt-e.offset,H=e.length;for(J<H&&(H=J),J-=H,e.length-=H;Q[tt++]=ht[at++],--H;);e.length===0&&(e.mode=21);break;case 26:if(J===0)break t;Q[tt++]=e.length,J--,e.mode=21;break;case 27:if(e.wrap){for(;T<32;){if(M===0)break t;M--,z|=U[N++]<<T,T+=8}if(X-=J,b.total_out+=X,e.total+=X,X&&(b.adler=e.check=e.flags?i(e.check,Q,X,tt-X):s(e.check,Q,X,tt-X)),X=J,(e.flags?z:a(z))!==e.check){b.msg="incorrect data check",e.mode=30;break}T=z=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;T<32;){if(M===0)break t;M--,z+=U[N++]<<T,T+=8}if(z!==(4294967295&e.total)){b.msg="incorrect length check",e.mode=30;break}T=z=0}e.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;case 32:default:return n}return b.next_out=tt,b.avail_out=J,b.next_in=N,b.avail_in=M,e.hold=z,e.bits=T,(e.wsize||X!==b.avail_out&&e.mode<30&&(e.mode<27||B!==4))&&$(b,b.output,b.next_out,X-b.avail_out)?(e.mode=31,-4):(q-=b.avail_in,X-=b.avail_out,b.total_in+=q,b.total_out+=X,e.total+=X,e.wrap&&X&&(b.adler=e.check=e.flags?i(e.check,Q,X,b.next_out-X):s(e.check,Q,X,b.next_out-X)),b.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(q==0&&X===0||B===4)&&F===_&&(F=-5),F)},g.inflateEnd=function(b){if(!b||!b.state)return n;var B=b.state;return B.window&&(B.window=null),b.state=null,_},g.inflateGetHeader=function(b,B){var e;return b&&b.state&&2&(e=b.state).wrap?((e.head=B).done=!1,_):n},g.inflateSetDictionary=function(b,B){var e,U=B.length;return b&&b.state?(e=b.state).wrap!==0&&e.mode!==11?n:e.mode===11&&s(1,B,U,0)!==e.check?-3:$(b,B,U,U)?(e.mode=31,-4):(e.havedict=1,_):n},g.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(v,R,g){var o=v("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];R.exports=function(y,m,_,n,l,r,f,a){var p,k,S,E,D,O,j,I,G,$=a.bits,b=0,B=0,e=0,U=0,Q=0,N=0,tt=0,M=0,J=0,z=0,T=null,q=0,X=new o.Buf16(16),H=new o.Buf16(16),at=null,ht=0;for(b=0;b<=15;b++)X[b]=0;for(B=0;B<n;B++)X[m[_+B]]++;for(Q=$,U=15;1<=U&&X[U]===0;U--);if(U<Q&&(Q=U),U===0)return l[r++]=20971520,l[r++]=20971520,a.bits=1,0;for(e=1;e<U&&X[e]===0;e++);for(Q<e&&(Q=e),b=M=1;b<=15;b++)if(M<<=1,(M-=X[b])<0)return-1;if(0<M&&(y===0||U!==1))return-1;for(H[1]=0,b=1;b<15;b++)H[b+1]=H[b]+X[b];for(B=0;B<n;B++)m[_+B]!==0&&(f[H[m[_+B]]++]=B);if(O=y===0?(T=at=f,19):y===1?(T=s,q-=257,at=i,ht-=257,256):(T=h,at=c,-1),b=e,D=r,tt=B=z=0,S=-1,E=(J=1<<(N=Q))-1,y===1&&852<J||y===2&&592<J)return 1;for(;;){for(j=b-tt,G=f[B]<O?(I=0,f[B]):f[B]>O?(I=at[ht+f[B]],T[q+f[B]]):(I=96,0),p=1<<b-tt,e=k=1<<N;l[D+(z>>tt)+(k-=p)]=j<<24|I<<16|G|0,k!==0;);for(p=1<<b-1;z&p;)p>>=1;if(p!==0?(z&=p-1,z+=p):z=0,B++,--X[b]==0){if(b===U)break;b=m[_+f[B]]}if(Q<b&&(z&E)!==S){for(tt===0&&(tt=Q),D+=e,M=1<<(N=b-tt);N+tt<U&&!((M-=X[N+tt])<=0);)N++,M<<=1;if(J+=1<<N,y===1&&852<J||y===2&&592<J)return 1;l[S=z&E]=Q<<24|N<<16|D-r|0}}return z!==0&&(l[D+z]=b-tt<<24|64<<16|0),a.bits=Q,0}},{"../utils/common":41}],51:[function(v,R,g){R.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(v,R,g){var o=v("../utils/common"),s=0,i=1;function h(u){for(var x=u.length;0<=--x;)u[x]=0}var c=0,y=29,m=256,_=m+1+y,n=30,l=19,r=2*_+1,f=15,a=16,p=7,k=256,S=16,E=17,D=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(_+2));h($);var b=new Array(2*n);h(b);var B=new Array(512);h(B);var e=new Array(256);h(e);var U=new Array(y);h(U);var Q,N,tt,M=new Array(n);function J(u,x,P,L,A){this.static_tree=u,this.extra_bits=x,this.extra_base=P,this.elems=L,this.max_length=A,this.has_stree=u&&u.length}function z(u,x){this.dyn_tree=u,this.max_code=0,this.stat_desc=x}function T(u){return u<256?B[u]:B[256+(u>>>7)]}function q(u,x){u.pending_buf[u.pending++]=255&x,u.pending_buf[u.pending++]=x>>>8&255}function X(u,x,P){u.bi_valid>a-P?(u.bi_buf|=x<<u.bi_valid&65535,q(u,u.bi_buf),u.bi_buf=x>>a-u.bi_valid,u.bi_valid+=P-a):(u.bi_buf|=x<<u.bi_valid&65535,u.bi_valid+=P)}function H(u,x,P){X(u,P[2*x],P[2*x+1])}function at(u,x){for(var P=0;P|=1&u,u>>>=1,P<<=1,0<--x;);return P>>>1}function ht(u,x,P){var L,A,W=new Array(f+1),Y=0;for(L=1;L<=f;L++)W[L]=Y=Y+P[L-1]<<1;for(A=0;A<=x;A++){var Z=u[2*A+1];Z!==0&&(u[2*A]=at(W[Z]++,Z))}}function et(u){var x;for(x=0;x<_;x++)u.dyn_ltree[2*x]=0;for(x=0;x<n;x++)u.dyn_dtree[2*x]=0;for(x=0;x<l;x++)u.bl_tree[2*x]=0;u.dyn_ltree[2*k]=1,u.opt_len=u.static_len=0,u.last_lit=u.matches=0}function nt(u){8<u.bi_valid?q(u,u.bi_buf):0<u.bi_valid&&(u.pending_buf[u.pending++]=u.bi_buf),u.bi_buf=0,u.bi_valid=0}function ut(u,x,P,L){var A=2*x,W=2*P;return u[A]<u[W]||u[A]===u[W]&&L[x]<=L[P]}function st(u,x,P){for(var L=u.heap[P],A=P<<1;A<=u.heap_len&&(A<u.heap_len&&ut(x,u.heap[A+1],u.heap[A],u.depth)&&A++,!ut(x,L,u.heap[A],u.depth));)u.heap[P]=u.heap[A],P=A,A<<=1;u.heap[P]=L}function lt(u,x,P){var L,A,W,Y,Z=0;if(u.last_lit!==0)for(;L=u.pending_buf[u.d_buf+2*Z]<<8|u.pending_buf[u.d_buf+2*Z+1],A=u.pending_buf[u.l_buf+Z],Z++,L===0?H(u,A,x):(H(u,(W=e[A])+m+1,x),(Y=O[W])!==0&&X(u,A-=U[W],Y),H(u,W=T(--L),P),(Y=j[W])!==0&&X(u,L-=M[W],Y)),Z<u.last_lit;);H(u,k,x)}function dt(u,x){var P,L,A,W=x.dyn_tree,Y=x.stat_desc.static_tree,Z=x.stat_desc.has_stree,K=x.stat_desc.elems,it=-1;for(u.heap_len=0,u.heap_max=r,P=0;P<K;P++)W[2*P]!==0?(u.heap[++u.heap_len]=it=P,u.depth[P]=0):W[2*P+1]=0;for(;u.heap_len<2;)W[2*(A=u.heap[++u.heap_len]=it<2?++it:0)]=1,u.depth[A]=0,u.opt_len--,Z&&(u.static_len-=Y[2*A+1]);for(x.max_code=it,P=u.heap_len>>1;1<=P;P--)st(u,W,P);for(A=K;P=u.heap[1],u.heap[1]=u.heap[u.heap_len--],st(u,W,1),L=u.heap[1],u.heap[--u.heap_max]=P,u.heap[--u.heap_max]=L,W[2*A]=W[2*P]+W[2*L],u.depth[A]=(u.depth[P]>=u.depth[L]?u.depth[P]:u.depth[L])+1,W[2*P+1]=W[2*L+1]=A,u.heap[1]=A++,st(u,W,1),2<=u.heap_len;);u.heap[--u.heap_max]=u.heap[1],function(rt,ft){var _t,ct,vt,ot,bt,kt,pt=ft.dyn_tree,xt=ft.max_code,zt=ft.stat_desc.static_tree,Ct=ft.stat_desc.has_stree,It=ft.stat_desc.extra_bits,Et=ft.stat_desc.extra_base,yt=ft.stat_desc.max_length,gt=0;for(ot=0;ot<=f;ot++)rt.bl_count[ot]=0;for(pt[2*rt.heap[rt.heap_max]+1]=0,_t=rt.heap_max+1;_t<r;_t++)yt<(ot=pt[2*pt[2*(ct=rt.heap[_t])+1]+1]+1)&&(ot=yt,gt++),pt[2*ct+1]=ot,xt<ct||(rt.bl_count[ot]++,bt=0,Et<=ct&&(bt=It[ct-Et]),kt=pt[2*ct],rt.opt_len+=kt*(ot+bt),Ct&&(rt.static_len+=kt*(zt[2*ct+1]+bt)));if(gt!==0){do{for(ot=yt-1;rt.bl_count[ot]===0;)ot--;rt.bl_count[ot]--,rt.bl_count[ot+1]+=2,rt.bl_count[yt]--,gt-=2}while(0<gt);for(ot=yt;ot!==0;ot--)for(ct=rt.bl_count[ot];ct!==0;)xt<(vt=rt.heap[--_t])||(pt[2*vt+1]!==ot&&(rt.opt_len+=(ot-pt[2*vt+1])*pt[2*vt],pt[2*vt+1]=ot),ct--)}}(u,x),ht(W,it,u.bl_count)}function t(u,x,P){var L,A,W=-1,Y=x[1],Z=0,K=7,it=4;for(Y===0&&(K=138,it=3),x[2*(P+1)+1]=65535,L=0;L<=P;L++)A=Y,Y=x[2*(L+1)+1],++Z<K&&A===Y||(Z<it?u.bl_tree[2*A]+=Z:A!==0?(A!==W&&u.bl_tree[2*A]++,u.bl_tree[2*S]++):Z<=10?u.bl_tree[2*E]++:u.bl_tree[2*D]++,W=A,it=(Z=0)===Y?(K=138,3):A===Y?(K=6,3):(K=7,4))}function F(u,x,P){var L,A,W=-1,Y=x[1],Z=0,K=7,it=4;for(Y===0&&(K=138,it=3),L=0;L<=P;L++)if(A=Y,Y=x[2*(L+1)+1],!(++Z<K&&A===Y)){if(Z<it)for(;H(u,A,u.bl_tree),--Z!=0;);else A!==0?(A!==W&&(H(u,A,u.bl_tree),Z--),H(u,S,u.bl_tree),X(u,Z-3,2)):Z<=10?(H(u,E,u.bl_tree),X(u,Z-3,3)):(H(u,D,u.bl_tree),X(u,Z-11,7));W=A,it=(Z=0)===Y?(K=138,3):A===Y?(K=6,3):(K=7,4)}}h(M);var C=!1;function d(u,x,P,L){X(u,(c<<1)+(L?1:0),3),function(A,W,Y,Z){nt(A),Z&&(q(A,Y),q(A,~Y)),o.arraySet(A.pending_buf,A.window,W,Y,A.pending),A.pending+=Y}(u,x,P,!0)}g._tr_init=function(u){C||(function(){var x,P,L,A,W,Y=new Array(f+1);for(A=L=0;A<y-1;A++)for(U[A]=L,x=0;x<1<<O[A];x++)e[L++]=A;for(e[L-1]=A,A=W=0;A<16;A++)for(M[A]=W,x=0;x<1<<j[A];x++)B[W++]=A;for(W>>=7;A<n;A++)for(M[A]=W<<7,x=0;x<1<<j[A]-7;x++)B[256+W++]=A;for(P=0;P<=f;P++)Y[P]=0;for(x=0;x<=143;)$[2*x+1]=8,x++,Y[8]++;for(;x<=255;)$[2*x+1]=9,x++,Y[9]++;for(;x<=279;)$[2*x+1]=7,x++,Y[7]++;for(;x<=287;)$[2*x+1]=8,x++,Y[8]++;for(ht($,_+1,Y),x=0;x<n;x++)b[2*x+1]=5,b[2*x]=at(x,5);Q=new J($,O,m+1,_,f),N=new J(b,j,0,n,f),tt=new J(new Array(0),I,0,l,p)}(),C=!0),u.l_desc=new z(u.dyn_ltree,Q),u.d_desc=new z(u.dyn_dtree,N),u.bl_desc=new z(u.bl_tree,tt),u.bi_buf=0,u.bi_valid=0,et(u)},g._tr_stored_block=d,g._tr_flush_block=function(u,x,P,L){var A,W,Y=0;0<u.level?(u.strm.data_type===2&&(u.strm.data_type=function(Z){var K,it=4093624447;for(K=0;K<=31;K++,it>>>=1)if(1&it&&Z.dyn_ltree[2*K]!==0)return s;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return i;for(K=32;K<m;K++)if(Z.dyn_ltree[2*K]!==0)return i;return s}(u)),dt(u,u.l_desc),dt(u,u.d_desc),Y=function(Z){var K;for(t(Z,Z.dyn_ltree,Z.l_desc.max_code),t(Z,Z.dyn_dtree,Z.d_desc.max_code),dt(Z,Z.bl_desc),K=l-1;3<=K&&Z.bl_tree[2*G[K]+1]===0;K--);return Z.opt_len+=3*(K+1)+5+5+4,K}(u),A=u.opt_len+3+7>>>3,(W=u.static_len+3+7>>>3)<=A&&(A=W)):A=W=P+5,P+4<=A&&x!==-1?d(u,x,P,L):u.strategy===4||W===A?(X(u,2+(L?1:0),3),lt(u,$,b)):(X(u,4+(L?1:0),3),function(Z,K,it,rt){var ft;for(X(Z,K-257,5),X(Z,it-1,5),X(Z,rt-4,4),ft=0;ft<rt;ft++)X(Z,Z.bl_tree[2*G[ft]+1],3);F(Z,Z.dyn_ltree,K-1),F(Z,Z.dyn_dtree,it-1)}(u,u.l_desc.max_code+1,u.d_desc.max_code+1,Y+1),lt(u,u.dyn_ltree,u.dyn_dtree)),et(u),L&&nt(u)},g._tr_tally=function(u,x,P){return u.pending_buf[u.d_buf+2*u.last_lit]=x>>>8&255,u.pending_buf[u.d_buf+2*u.last_lit+1]=255&x,u.pending_buf[u.l_buf+u.last_lit]=255&P,u.last_lit++,x===0?u.dyn_ltree[2*P]++:(u.matches++,x--,u.dyn_ltree[2*(e[P]+m+1)]++,u.dyn_dtree[2*T(x)]++),u.last_lit===u.lit_bufsize-1},g._tr_align=function(u){X(u,2,3),H(u,k,$),function(x){x.bi_valid===16?(q(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(u)}},{"../utils/common":41}],53:[function(v,R,g){R.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(v,R,g){(function(o){(function(s,i){if(!s.setImmediate){var h,c,y,m,_=1,n={},l=!1,r=s.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(s);f=f&&f.setTimeout?f:s,h={}.toString.call(s.process)==="[object process]"?function(S){process.nextTick(function(){p(S)})}:function(){if(s.postMessage&&!s.importScripts){var S=!0,E=s.onmessage;return s.onmessage=function(){S=!1},s.postMessage("","*"),s.onmessage=E,S}}()?(m="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",k,!1):s.attachEvent("onmessage",k),function(S){s.postMessage(m+S,"*")}):s.MessageChannel?((y=new MessageChannel).port1.onmessage=function(S){p(S.data)},function(S){y.port2.postMessage(S)}):r&&"onreadystatechange"in r.createElement("script")?(c=r.documentElement,function(S){var E=r.createElement("script");E.onreadystatechange=function(){p(S),E.onreadystatechange=null,c.removeChild(E),E=null},c.appendChild(E)}):function(S){setTimeout(p,0,S)},f.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var E=new Array(arguments.length-1),D=0;D<E.length;D++)E[D]=arguments[D+1];var O={callback:S,args:E};return n[_]=O,h(_),_++},f.clearImmediate=a}function a(S){delete n[S]}function p(S){if(l)setTimeout(p,0,S);else{var E=n[S];if(E){l=!0;try{(function(D){var O=D.callback,j=D.args;switch(j.length){case 0:O();break;case 1:O(j[0]);break;case 2:O(j[0],j[1]);break;case 3:O(j[0],j[1],j[2]);break;default:O.apply(i,j)}})(E)}finally{a(S),l=!1}}}}function k(S){S.source===s&&typeof S.data=="string"&&S.data.indexOf(m)===0&&p(+S.data.slice(m.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Tt);var Dt=Tt.exports;const Ut=Ft(Dt);var Rt={exports:{}};(function(w,V){(function(v,R){R()})(mt,function(){function v(c,y){return typeof y>"u"?y={autoBom:!1}:typeof y!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function R(c,y,m){var _=new XMLHttpRequest;_.open("GET",c),_.responseType="blob",_.onload=function(){h(_.response,y,m)},_.onerror=function(){console.error("could not download file")},_.send()}function g(c){var y=new XMLHttpRequest;y.open("HEAD",c,!1);try{y.send()}catch{}return 200<=y.status&&299>=y.status}function o(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(y)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof mt=="object"&&mt.global===mt?mt:void 0,i=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(c,y,m){var _=s.URL||s.webkitURL,n=document.createElement("a");y=y||c.name||"download",n.download=y,n.rel="noopener",typeof c=="string"?(n.href=c,n.origin===location.origin?o(n):g(n.href)?R(c,y,m):o(n,n.target="_blank")):(n.href=_.createObjectURL(c),setTimeout(function(){_.revokeObjectURL(n.href)},4e4),setTimeout(function(){o(n)},0))}:"msSaveOrOpenBlob"in navigator?function(c,y,m){if(y=y||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(v(c,m),y);else if(g(c))R(c,y,m);else{var _=document.createElement("a");_.href=c,_.target="_blank",setTimeout(function(){o(_)})}}:function(c,y,m,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof c=="string")return R(c,y,m);var n=c.type==="application/octet-stream",l=/constructor/i.test(s.HTMLElement)||s.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||n&&l||i)&&typeof FileReader<"u"){var f=new FileReader;f.onloadend=function(){var k=f.result;k=r?k:k.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=k:location=k,_=null},f.readAsDataURL(c)}else{var a=s.URL||s.webkitURL,p=a.createObjectURL(c);_?_.location=p:location.href=p,_=null,setTimeout(function(){a.revokeObjectURL(p)},4e4)}});s.saveAs=h.saveAs=h,w.exports=h})})(Rt);var Pt=Rt.exports;const Lt=()=>{let w=document.createElement("Canvas"),V=w.getContext("webgl2"),v=document.querySelector("#url"),R=document.querySelector("#submit"),g=document.querySelector("#tips");R.addEventListener("click",async()=>{R.disabled=!0;let o=v.value;if(!o)alert("input url first!");else{let c=Nt(o);if(!c)alert("invalid url!");else{let y=await jt(c);if(y){var s=new Ut,i={};for(let m=0;m<y.length;m++){g.innerText=`downloading ${m+1}/${y.length}`,g.classList.remove("hidden");let _=y[m],{images:n,name:l}=_;i[l]&&(l=`${Date.now()}_${l}`),i[l]=!0;let r=n.reduce((a,p)=>St(p.height)&&St(p.width)&&p.size>a.size&&p.height>=a.height?p:a),f=await Mt(w,V,r);var h=s.folder("images");h.file(l,f,{base64:!0})}s.generateAsync({type:"blob"}).then(function(m){Pt.saveAs(m,`${Date.now()}.zip`)}),g.innerText="download complete!"}}}R.disabled=!1})},St=w=>(w&w-1)===0,Nt=w=>{var V=/sketchfab\.com\/models\/(\w{32})/,v="";return V.test(w)?v=RegExp.$1:(V=/sketchfab\.com\/3d\-models\/(\S+)(\w{32})/,V.test(w)?v=RegExp.$2:(V=/sketchfab\.com\/3d\-models\/([a-zA-Z0-9_-]{32})/,V.test(w)&&(v=RegExp.$1))),v&&v.indexOf("-")>-1&&(v=""),v},jt=w=>new Promise((V,v)=>{fetch(`/api/info/${w}`).then(R=>R.json()).then(R=>{V(R.data)}).catch(R=>{console.error(R),alert("server error!"),V()})});async function Mt(w,V,v){let{url:R,pk:g}=v,o=await Wt(R);w.width=o.width,w.height=o.height;let s=Zt(V,o);Gt(V,g,[V.TEXTURE_2D,0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,o],!1,s,!0);let i=V.createFramebuffer();V.bindFramebuffer(V.FRAMEBUFFER,i),V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,s,0);var h=V.checkFramebufferStatus(V.FRAMEBUFFER);if(h==V.FRAMEBUFFER_COMPLETE){V.viewport(0,0,w.width,w.height);var c=new Uint8Array(w.width*w.height*4);V.readPixels(0,0,w.width,w.height,V.RGBA,V.UNSIGNED_BYTE,c);var y=document.createElement("canvas");y.width=w.width,y.height=w.height;var m=y.getContext("2d"),_=m.createImageData(w.width,w.height);_.data.set(c),m.putImageData(_,0,0);var n=y.toDataURL("image/png");return n.split(",")[1]}else console.error(h)}function Wt(w){return new Promise((V,v)=>{let R=new Image;R.crossOrigin="anonymous",R.src=w,R.onload=()=>{V(R)}})}function Zt(w,V){let v=w.createTexture();return w.bindTexture(w.TEXTURE_2D,v),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,V),v}const Gt=function(w,V,v,R=!1,g,o){var s=w.getParameter(w.ARRAY_BUFFER_BINDING),i=w.getParameter(w.CURRENT_PROGRAM),h=w.getParameter(w.FRAMEBUFFER_BINDING),c=w.isEnabled(w.BLEND),y=w.isEnabled(w.DEPTH_TEST),m=w.getParameter(w.VIEWPORT),_=w.isEnabled(w.SCISSOR_TEST),n=_?w.getParameter(w.SCISSOR_BOX):void 0,l=w.getParameter(w.ACTIVE_TEXTURE),r=0;w.bindVertexArray&&(r=w.getParameter(w.VERTEX_ARRAY_BINDING));var f=w.getParameter(w.DEPTH_WRITEMASK),a=w.getParameter(w.COLOR_WRITEMASK),p=v[5],k=p.width,S=p.height;w.bindTexture(v[0],g),w.texImage2D(v[0],v[1],w.RGBA,k,S,0,w.RGBA,w.UNSIGNED_BYTE,null);var E=w.createTexture();w.bindTexture(w.TEXTURE_2D,E),w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,!1),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),R?w.compressedTexImage2D.apply(w,v):w.texImage2D.apply(w,v);var D=Ht(w);V*=64,V%=k*S,D.prepare(-V,E,o,!1,l),D.renderInto(g,k,S),w.deleteTexture(E),w.bindFramebuffer(w.FRAMEBUFFER,h),w.bindBuffer(w.ARRAY_BUFFER,s),w.useProgram(i),m&&w.viewport(m[0],m[1],m[2],m[3]),_&&(w.enable(w.SCISSOR_TEST),w.scissor(n[0],n[1],n[2],n[3])),c&&w.enable(w.BLEND),y&&w.enable(w.DEPTH_TEST),r?w.bindVertexArray(r):w.bindVertexArray(null),w.depthMask(f),w.colorMask(a[0],a[1],a[2],a[3]),w.activeTexture(l),w.bindTexture(v[0],g)};function Ht(w){var V=w.createVertexArray();w.bindVertexArray(V);var v=w.createBuffer();w.bindBuffer(w.ARRAY_BUFFER,v),w.bufferData(w.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,1,1,-1,-1,1,1,-1,1]),w.STATIC_DRAW);var R=w.createProgram(),g=At(w,w.VERTEX_SHADER,Bt),o=At(w,w.FRAGMENT_SHADER,Ot);if(w.attachShader(R,g),w.attachShader(R,o),w.linkProgram(R),!w.getProgramParameter(R,w.LINK_STATUS))return null;w.useProgram(R);var s={attribLocations:{vertex:w.getAttribLocation(R,"aVertex")},uniformLocations:{uSampler:w.getUniformLocation(R,"uSampler"),uSize:w.getUniformLocation(R,"uSize"),uOffset:w.getUniformLocation(R,"uOffset"),uYFlipped:w.getUniformLocation(R,"uYFlipped")}};if(V){var i=w.FLOAT;w.vertexAttribPointer(s.attribLocations.vertex,2,i,!1,0,0),w.enableVertexAttribArray(s.attribLocations.vertex)}var h=w.createFramebuffer();function c(m,_,n,l,r){if(w.useProgram(R),w.uniform1i(s.uniformLocations.uOffset,l?-1:m),r||(r=w.TEXTURE0),w.uniform1i(s.uniformLocations.uSampler,r-w.TEXTURE0),w.uniform1i(s.uniformLocations.uYFlipped,n),w.activeTexture(r),w.bindTexture(w.TEXTURE_2D,_),V)w.bindVertexArray(V);else{var f=w.FLOAT;w.bindBuffer(w.ARRAY_BUFFER,v),w.vertexAttribPointer(s.attribLocations.vertex,2,f,!1,0,0),w.enableVertexAttribArray(s.attribLocations.vertex)}w.disable(w.BLEND),w.disable(w.DEPTH_TEST),w.disable(w.SCISSOR_TEST),w.depthMask(!1),w.colorMask(!0,!0,!0,!0)}function y(m,_,n){w.uniform2i(s.uniformLocations.uSize,_,n),w.bindFramebuffer(w.FRAMEBUFFER,h),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,m,0),w.viewport(0,0,_,n),w.drawArrays(w.TRIANGLES,0,6)}return{prepare:c,renderInto:y}}function At(w,V,v){var R=w.createShader(V);return delete w.shaderSource,w.shaderSource(R,v),delete w.compileShader,w.compileShader(R),w.getShaderParameter(R,w.COMPILE_STATUS)?R:(console.log("ERROR TP: "+w.getShaderInfoLog(R)),null)}window.onload=Lt;
